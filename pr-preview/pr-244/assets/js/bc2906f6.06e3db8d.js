"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[7266],{3905:(e,a,t)=>{t.d(a,{Zo:()=>l,kt:()=>k});var n=t(7294);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var o=n.createContext({}),p=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):m(m({},a),e)),t},l=function(e){var a=p(e.components);return n.createElement(o.Provider,{value:a},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},N=n.forwardRef((function(e,a){var t=e.components,s=e.mdxType,r=e.originalType,o=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),c=p(t),N=s,k=c["".concat(o,".").concat(N)]||c[N]||d[N]||r;return t?n.createElement(k,m(m({ref:a},l),{},{components:t})):n.createElement(k,m({ref:a},l))}));function k(e,a){var t=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=t.length,m=new Array(r);m[0]=N;var i={};for(var o in a)hasOwnProperty.call(a,o)&&(i[o]=a[o]);i.originalType=e,i[c]="string"==typeof e?e:s,m[1]=i;for(var p=2;p<r;p++)m[p]=t[p];return n.createElement.apply(null,m)}return n.createElement.apply(null,t)}N.displayName="MDXCreateElement"},9236:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>m,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var n=t(7462),s=(t(7294),t(3905));const r={id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",keywords:["Cost recommendations","EC2 rightsizing recommendations"],toc_max_heading_level:4},m="Cost Recommendations",i={unversionedId:"cost_recommendations",id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",source:"@site/docs/cost_recommendations.md",sourceDirName:".",slug:"/cost_recommendations",permalink:"/cost_recommendations",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/cost_recommendations.md",tags:[],version:"current",frontMatter:{id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",keywords:["Cost recommendations","EC2 rightsizing recommendations"],toc_max_heading_level:4},sidebar:"someSidebar",previous:{title:"Savings Planner",permalink:"/savings_planner"},next:{title:"Changelog",permalink:"/changelog"}},o={},p=[{value:"Types of Recommendations",id:"types-of-recommendations",level:2},{value:"View Cost Recommendations",id:"view-cost-recommendations",level:2},{value:"View Recommendations during a Trial",id:"view-recommendations-during-a-trial",level:3},{value:"Provider-Specific Recommendations",id:"provider-specific-recommendations",level:2},{value:"AWS Recommendations",id:"aws",level:3},{value:"EC2 Rightsizing Recommendations",id:"ec2-rightsizing-recommendations",level:4},{value:"Azure Recommendations",id:"azure",level:3},{value:"GCP Recommendations",id:"gcp",level:3},{value:"GCP Compute Rightsizing Recommendations",id:"gcp-compute-rightsizing-recommendations",level:4},{value:"Datadog Recommendations",id:"datadog",level:3},{value:"Kubernetes Rightsizing Recommendations",id:"kubernetes-rightsizing",level:3},{value:"View Kubernetes Rightsizing Recommendations",id:"view-kubernetes-rightsizing-recommendations",level:4},{value:"How Vantage Calculates Kubernetes Rightsizing Recommendations",id:"how-vantage-calculates-kubernetes-rightsizing-recommendations",level:4}],l={toc:p},c="wrapper";function d(e){let{components:a,...t}=e;return(0,s.kt)(c,(0,n.Z)({},l,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"cost-recommendations"},"Cost Recommendations"),(0,s.kt)("p",null,"Vantage monitors your connected providers and shows cost recommendations as your infrastructure evolves and changes. You can implement these recommendations to lower your bill."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Cost recommendations are currently available for AWS, Azure, GCP, Datadog, and Kubernetes.")),(0,s.kt)("h2",{id:"types-of-recommendations"},"Types of Recommendations"),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"To get started with cost recommendations, you can also view a video demo on ",(0,s.kt)("a",{parentName:"p",href:"/vantage_university_observability"},"Vantage University")," \ud83c\udf93.")),(0,s.kt)("p",null,"Your available recommendations depend on what services and resources are running in your account. In general, there are three types of recommendations:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Cloud-provider recommendations:")," Gathered from your connected provider and further enriched in Vantage"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Custom-built recommendations:")," Created by Vantage"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Cross-provider recommendations:")," Suggests where a service from another provider could be used")),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"A list of cost recommendations in the console",width:"100%",src:"/img/cost-recommendations-screen.png"})),(0,s.kt)("h2",{id:"view-cost-recommendations"},"View Cost Recommendations"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"From the top navigation, click ",(0,s.kt)("strong",{parentName:"li"},"Recommendations"),"."),(0,s.kt)("li",{parentName:"ol"},"The following columns are displayed: ",(0,s.kt)("strong",{parentName:"li"},"Service"),", ",(0,s.kt)("strong",{parentName:"li"},"Potential Savings"),", and ",(0,s.kt)("strong",{parentName:"li"},"Description"),".",(0,s.kt)("admonition",{parentName:"li",type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"To filter recommendations by provider, open the ",(0,s.kt)("strong",{parentName:"p"},"Show All")," menu at the top right of the table and select a provider."))),(0,s.kt)("li",{parentName:"ol"},"In cases where actions are recommended for specific resources, such as adding lifecycle policies, the ",(0,s.kt)("strong",{parentName:"li"},"View resources")," button is displayed. Click this button to see a list of the affected resources."),(0,s.kt)("li",{parentName:"ol"},"If you no longer want to view a recommendation, click the ",(0,s.kt)("strong",{parentName:"li"},"Archive")," icon (looks like an arrow pointing down). The recommendation will be moved to the ",(0,s.kt)("strong",{parentName:"li"},"Archived")," tab.")),(0,s.kt)("h3",{id:"view-recommendations-during-a-trial"},"View Recommendations during a Trial"),(0,s.kt)("p",null,"If you are currently on a trial, the specific recommendations are blurred; however, the total amount of potential savings is displayed. After you activate a Vantage subscription, these recommendations are fully visible. As you make changes to your infrastructure, the recommendations are automatically updated. Recommendations are refreshed once a day."),(0,s.kt)("h2",{id:"provider-specific-recommendations"},"Provider-Specific Recommendations"),(0,s.kt)("p",null,"The recommendations that are available for ",(0,s.kt)("a",{parentName:"p",href:"/cost_recommendations#aws"},"AWS"),", ",(0,s.kt)("a",{parentName:"p",href:"/cost_recommendations#azure"},"Azure"),", ",(0,s.kt)("a",{parentName:"p",href:"/cost_recommendations#gcp"},"GCP"),", ",(0,s.kt)("a",{parentName:"p",href:"/cost_recommendations#datadog"},"Datadog"),", and ",(0,s.kt)("a",{parentName:"p",href:"/cost_recommendations#kubernetes-rightsizing"},"Kubernetes")," in Vantage are based on the granularity of data exposed by each provider. Notes for these providers are provided below."),(0,s.kt)("h3",{id:"aws"},"AWS Recommendations"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Recommendation Type"),(0,s.kt)("th",{parentName:"tr",align:null},"Description"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Savings Plans"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will look at your AWS infrastructure on a weekly basis and provide Savings Plan recommendations tailored to your actual usage of EC2, Fargate, and Lambda.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will recommend Reserved Instances for services, like RDS, ElastiCache, Elasticsearch, and more with specific Reserved Instances to purchase.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Stranded resources"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will look for stranded resources, such as EBS volumes, IP addresses, and more, to ensure you've cleaned up everything you're not using.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Storage optimizations"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will look at EBS volumes you're using to provide optimization recommendations as well as S3 object type usage to recommend actions, like changing EBS volumes or enabling S3 Intelligent-Tiering.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Networking optimizations"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will look for networking optimizations especially for CloudFront and S3.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Lifecycle policies"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will profile for services that can auto-delete data to reduce costs and expected savings noted.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"EC2 rightsizing opportunities"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will identify rightsizing opportunities and provide specific reasons to rightsize EC2 instances, such as over-provisioned CPU. See more information below.")))),(0,s.kt)("h4",{id:"ec2-rightsizing-recommendations"},"EC2 Rightsizing Recommendations"),(0,s.kt)("p",null,"If you have EC2 instances that are over-allocated in terms of vCPU and GB of RAM, you may be paying more than needed per instance. Rightsizing recommendations can help you save significantly, by identifying rightsizing opportunities and providing specific reasons to rightsize, such as over-provisioned CPU."),(0,s.kt)("p",null,"Each recommendation includes potential savings as well as the number of instances identified for rightsizing."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"On the ",(0,s.kt)("strong",{parentName:"li"},"Cost Recommendations")," screen, click ",(0,s.kt)("strong",{parentName:"li"},"View Resources")," to view each identified EC2 instance that is recommended for rightsizing."),(0,s.kt)("li",{parentName:"ol"},"Select a resource from the list."),(0,s.kt)("li",{parentName:"ol"},"The ",(0,s.kt)("a",{parentName:"li",href:"/active_resources"},"Active Resources")," screen is displayed. Select the ",(0,s.kt)("strong",{parentName:"li"},"Rightsizing")," tab. The tab includes a recommended size for migration (e.g., \u201cMigrate to m5.large\u201d), a list of associated reasons (e.g., \u201cCPU over-provisioned\u201d), if available, and the potential monthly savings."),(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Compare Pricing")," to explore an instance pricing comparison via ",(0,s.kt)("a",{parentName:"li",href:"https://instances.vantage.sh"},"ec2instances.info"),". This pricing comparison evaluates the current instance type used against the proposed instance type from the recommendation.")),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"An EC2 rightsizing recommendation with a button to compare instance sizes in the console",width:"90%",src:"https://assets.vantage.sh/blog/vantage-launches-ec2-rightsizing-recommendations/rightsizing-recommendation.png"})),(0,s.kt)("h3",{id:"azure"},"Azure Recommendations"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"A list of Azure-related recommendations in the console",width:"70%",src:"/img/azure-cost-recs.png"})),(0,s.kt)("br",null),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Recommendation Type"),(0,s.kt)("th",{parentName:"tr",align:null},"Description"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Compute Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Suggestions for instances with on-demand usage that could be converted to Reserved Instances for better savings.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Compute unattached virtual hard disks"),(0,s.kt)("td",{parentName:"tr",align:null},"Disks that have not been attached to a VM in the last 30 days.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Compute Savings Plans"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will identify potential savings from purchasing Compute Savings Plans.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Virtual Machine (VM) Rightsizing"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest VM instances that can be rightsized to offer savings. Suggestions will be made available through the Active Resource page's Rightsizing tab as well.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Blob Storage Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that can save on Blob v2 and Datalake storage Gen2 costs.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"SQL PaaS DB Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that can save on your pay-as-you-go costs.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Files Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that can save on your on-demand costs.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"SQL DB Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that provide a reduced rate.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"App Service Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that provide a reduced rate.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Cosmos DB Reserved Instances"),(0,s.kt)("td",{parentName:"tr",align:null},"Vantage will suggest purchasing Reserved Instances that provide a reduced rate.")))),(0,s.kt)("h3",{id:"gcp"},"GCP Recommendations"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"A list of GCP-related recommendations in the console",width:"100%",src:"/img/gcp-cost-recs.png"})),(0,s.kt)("br",null),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Recommendation Type"),(0,s.kt)("th",{parentName:"tr",align:null},"Description"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Rightsizing recommendations"),(0,s.kt)("td",{parentName:"tr",align:null},"Show whether compute resources are overprovisioned. For example, ",(0,s.kt)("em",{parentName:"td"},"We have identified 2 Compute instances for rightsizing that offer savings.")," See the next section for details on viewing resource-specific rightsizing recommendations.")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"Commitment recommendations"),(0,s.kt)("td",{parentName:"tr",align:null},"Commitment-related recommendations for resource-based commitment discounts. For example, ",(0,s.kt)("em",{parentName:"td"},"We have found that your account could save by purchasing Compute Commitments."))))),(0,s.kt)("h4",{id:"gcp-compute-rightsizing-recommendations"},"GCP Compute Rightsizing Recommendations"),(0,s.kt)("p",null,"If you have GCP Compute instances that are overprovisioined, rightsizing recommendations are available. Recommendations are also provided in the case of idle instances."),(0,s.kt)("p",null,"Each recommendation includes potential monthly savings as well as the number of instances identified for rightsizing."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"On the ",(0,s.kt)("strong",{parentName:"li"},"Cost Recommendations")," screen, click ",(0,s.kt)("strong",{parentName:"li"},"View Resources")," to view each identified resource that is recommended for rightsizing."),(0,s.kt)("li",{parentName:"ol"},"Select a resource from the list."),(0,s.kt)("li",{parentName:"ol"},"The ",(0,s.kt)("a",{parentName:"li",href:"/active_resources"},"Active Resources")," screen is displayed. Select the ",(0,s.kt)("strong",{parentName:"li"},"Rightsizing"),' tab. The tab includes a recommended size for migration (e.g., \u201cMigrate from e2-medium to e2-small."). Any available idle resource recommendations are also displayed (e.g., "Stop idle VM idle-instance-1."). The potential monthly savings for taking action on these recommendations are also displayed.')),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"A set of GCP rightsizing recommendations in the console",width:"90%",src:"/img/gcp-rightsizing.png"})),(0,s.kt)("h3",{id:"datadog"},"Datadog Recommendations"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"A list of Datadog-related recommendations in the console",width:"100%",src:"/img/datadog-cost-recs.png"})),(0,s.kt)("p",null,"For Datadog, Vantage provides recommendations about making commitments for Datadog services where ",(0,s.kt)("a",{parentName:"p",href:"https://handbook.vantage.sh/datadog/committed-use-discounts/"},"committed use discounts")," are offered. These recommendations are based on your actual usage of Datadog services to assist with making the right commitment."),(0,s.kt)("h3",{id:"kubernetes-rightsizing"},"Kubernetes Rightsizing Recommendations"),(0,s.kt)("p",null,"Without proper resource allocation, Kubernetes clusters can become overprovisioned, leading to wasted resources and idle costs. Vantage provides Kubernetes rightsizing recommendations to help you identify affected resources."),(0,s.kt)("p",null,"These recommendations are focused on ",(0,s.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/workloads/controllers/"},"managed workloads")," within Kubernetes clusters and do not provide rightsizing recommendations for the Kubernetes nodes themselves."),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"For a full guide on understanding rightsizing and how to rightsize Kubernetes resources, see the following article in the ",(0,s.kt)("a",{parentName:"p",href:"https://handbook.vantage.sh/kubernetes/kubernetes-rightsizing/"},"Cloud Cost Handbook"),".")),(0,s.kt)("h4",{id:"view-kubernetes-rightsizing-recommendations"},"View Kubernetes Rightsizing Recommendations"),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Rightsizing recommendations require version 1.0.24 or later of the Vantage Kubernetes agent. See the ",(0,s.kt)("a",{parentName:"p",href:"/kubernetes_agent#upgrade-agent"},"Kubernetes agent documentation")," for information on how to upgrade the agent. Once the upgrade is complete, the agent will begin uploading the data needed to generate rightsizing recommendations. After the agent is upgraded or installed, recommendations will become available within 48 hours. This step is required to ensure there is enough data to make a valid recommendation. Historical data is not available before the agent upgrade, so it is recommended that you recognize cyclical resource usage patterns, such as a weekly spike when you first review recommendations.")),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"From the ",(0,s.kt)("strong",{parentName:"li"},"Cost Recommendations")," screen, click\xa0",(0,s.kt)("strong",{parentName:"li"},"View resources"),"\xa0to view each identified Kubernetes workload that is recommended for rightsizing."),(0,s.kt)("li",{parentName:"ol"},"Select a workload from the list. The workload is displayed within the ",(0,s.kt)("a",{parentName:"li",href:"/active_resources"},"Active Resources"),"\xa0screen."),(0,s.kt)("li",{parentName:"ol"},"Select the ",(0,s.kt)("strong",{parentName:"li"},"Rightsizing"),"\xa0tab. A section for each container that\u2019s identified for rightsizing is included.",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Each recommendation includes a high-fidelity graph of CPU and RAM used within the container in the past month, the average and maximum usage for mCPU and memory, and recommendations for how to rightsize your configuration. The chart includes a per-day average usage. The table provides a 30-day average and 30-day average max usage.",(0,s.kt)("admonition",{parentName:"li",type:"note"},(0,s.kt)("p",{parentName:"admonition"},"mCPU refers to milliCPU, which is a fractional representation of CPU, where 1 CPU is equal to 1000 milliCPU. ",(0,s.kt)("strong",{parentName:"p"},"Current Configuration")," comes from the currently configured requests for the pod template within the controller spec. This is collected by the Kubernetes agent hourly and updated when the cost data is imported, roughly once per 24 hours."))),(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("strong",{parentName:"li"},"Potential Monthly Savings")," are also provided to indicate your estimated savings once these recommendations are implemented on your Kubernetes resources.")))),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"The Kubernetes Rightsizing UI with a sample recommendation displayed",width:"80%",src:"/img/k8s-rightsize.png"})),(0,s.kt)("h4",{id:"how-vantage-calculates-kubernetes-rightsizing-recommendations"},"How Vantage Calculates Kubernetes Rightsizing Recommendations"),(0,s.kt)("p",null,"Vantage takes the following steps to calculate Kubernetes rightsizing recommendations."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Identify controllers with low efficiency."))),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Controllers running below an efficiency level of 80% over the last 30 days are identified."),(0,s.kt)("li",{parentName:"ul"},"Efficiency is calculated as the percentage of the average CPU or memory utilization divided by the amount allocated for that resource."),(0,s.kt)("li",{parentName:"ul"},"CPU usage is determined using ",(0,s.kt)("inlineCode",{parentName:"li"},"container_cpu_usage_seconds_total"),", converted from CPU seconds to cores using ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mfrac",{parentName:"mrow"},(0,s.kt)("mrow",{parentName:"mfrac"},(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"current"),(0,s.kt)("mo",{parentName:"mrow"},"\u2212"),(0,s.kt)("mtext",{parentName:"mrow"},"previous"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("mtext",{parentName:"mfrac"},"elapsed"))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\frac{(\\text{current} - \\text{previous})}{\\text{elapsed}}")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.4911em",verticalAlign:"-0.4811em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mopen nulldelimiter"}),(0,s.kt)("span",{parentName:"span",className:"mfrac"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.01em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.655em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord text mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"elapsed"))))),(0,s.kt)("span",{parentName:"span",style:{top:"-3.23em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"frac-line",style:{borderBottomWidth:"0.04em"}})),(0,s.kt)("span",{parentName:"span",style:{top:"-3.485em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mopen mtight"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"current")),(0,s.kt)("span",{parentName:"span",className:"mbin mtight"},"\u2212"),(0,s.kt)("span",{parentName:"span",className:"mord text mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"previous")),(0,s.kt)("span",{parentName:"span",className:"mclose mtight"},")"))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.4811em"}},(0,s.kt)("span",{parentName:"span"}))))),(0,s.kt)("span",{parentName:"span",className:"mclose nulldelimiter"})))))),"."),(0,s.kt)("li",{parentName:"ul"},"Memory usage is determined using ",(0,s.kt)("inlineCode",{parentName:"li"},"container_memory_working_set_bytes"),"."),(0,s.kt)("li",{parentName:"ul"},"The Vantage agent scrapes metrics every 60 seconds, whereas Prometheus defaults to a 15-second interval. This can smooth out short-term resource usage spikes."),(0,s.kt)("li",{parentName:"ul"},"The agent reports on an hourly interval, capturing three values\u2014average, min, and max\u2014for both CPU and memory:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Average:")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mfrac",{parentName:"mrow"},(0,s.kt)("mrow",{parentName:"mfrac"},(0,s.kt)("mo",{parentName:"mrow"},"\u2211"),(0,s.kt)("mtext",{parentName:"mrow"},"datapoints")),(0,s.kt)("mtext",{parentName:"mfrac"},"count(datapoints)"))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\frac{\\sum \\text{datapoints}}{\\text{count(datapoints)}}")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.53em",verticalAlign:"-0.52em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mopen nulldelimiter"}),(0,s.kt)("span",{parentName:"span",className:"mfrac"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.01em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.655em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord text mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"count(datapoints)"))))),(0,s.kt)("span",{parentName:"span",style:{top:"-3.23em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"frac-line",style:{borderBottomWidth:"0.04em"}})),(0,s.kt)("span",{parentName:"span",style:{top:"-3.485em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mop op-symbol small-op mtight",style:{position:"relative",top:"0em"}},"\u2211"),(0,s.kt)("span",{parentName:"span",className:"mspace mtight",style:{marginRight:"0.1952em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"datapoints")))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.52em"}},(0,s.kt)("span",{parentName:"span"}))))),(0,s.kt)("span",{parentName:"span",className:"mclose nulldelimiter"}))))))," ",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"CPU (Average):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"avg_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"irate"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_cpu_usage_seconds_total[1m]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"["),(0,s.kt)("mn",{parentName:"mrow"},"1"),(0,s.kt)("mi",{parentName:"mrow"},"h"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{avg\\_over\\_time}(\\text{irate}(\\text{container\\_cpu\\_usage\\_seconds\\_total[1m]})[1h])")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"avg_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"irate")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_cpu_usage_seconds_total[1m]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")"),(0,s.kt)("span",{parentName:"span",className:"mopen"},"["),(0,s.kt)("span",{parentName:"span",className:"mord"},"1"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"h"),(0,s.kt)("span",{parentName:"span",className:"mclose"},"])")))))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Memory (Average):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"avg_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_memory_working_set_bytes[1h]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{avg\\_over\\_time}(\\text{container\\_memory\\_working\\_set\\_bytes[1h]})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"avg_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_memory_working_set_bytes[1h]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")")))))))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Min:")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"min"),(0,s.kt)("mo",{parentName:"mrow"},"\u2061"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"datapoints"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\min(\\text{datapoints})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,s.kt)("span",{parentName:"span",className:"mop"},"min"),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"datapoints")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")"))))),"   ",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"CPU (Min):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"min_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"irate"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_cpu_usage_seconds_total[1m]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"["),(0,s.kt)("mn",{parentName:"mrow"},"1"),(0,s.kt)("mi",{parentName:"mrow"},"h"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{min\\_over\\_time}(\\text{irate}(\\text{container\\_cpu\\_usage\\_seconds\\_total[1m]})[1h])")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"min_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"irate")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_cpu_usage_seconds_total[1m]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")"),(0,s.kt)("span",{parentName:"span",className:"mopen"},"["),(0,s.kt)("span",{parentName:"span",className:"mord"},"1"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"h"),(0,s.kt)("span",{parentName:"span",className:"mclose"},"])")))))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Memory (Min):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"min_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_memory_working_set_bytes[1h]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{min\\_over\\_time}(\\text{container\\_memory\\_working\\_set\\_bytes[1h]})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"min_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_memory_working_set_bytes[1h]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")")))))," "))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Max:")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"max"),(0,s.kt)("mo",{parentName:"mrow"},"\u2061"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"datapoints"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\max(\\text{datapoints})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,s.kt)("span",{parentName:"span",className:"mop"},"max"),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"datapoints")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")"))))),"                                                         ",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"CPU (Max):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"max_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"irate"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_cpu_usage_seconds_total[1m]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"["),(0,s.kt)("mn",{parentName:"mrow"},"1"),(0,s.kt)("mi",{parentName:"mrow"},"h"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{max\\_over\\_time}(\\text{irate}(\\text{container\\_cpu\\_usage\\_seconds\\_total[1m]})[1h])")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"max_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"irate")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_cpu_usage_seconds_total[1m]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")"),(0,s.kt)("span",{parentName:"span",className:"mopen"},"["),(0,s.kt)("span",{parentName:"span",className:"mord"},"1"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"h"),(0,s.kt)("span",{parentName:"span",className:"mclose"},"])")))))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Memory (Max):")," ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mtext",{parentName:"mrow"},"max_over_time"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mtext",{parentName:"mrow"},"container_memory_working_set_bytes[1h]"),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\text{max\\_over\\_time}(\\text{container\\_memory\\_working\\_set\\_bytes[1h]})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"max_over_time")),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"container_memory_working_set_bytes[1h]")),(0,s.kt)("span",{parentName:"span",className:"mclose"},")")))))))))),(0,s.kt)("li",{parentName:"ul"},"The lookback period for recommendations is 30 days, aggregating data by workload controller (e.g., Deployment)."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Determine the target amount for rightsizing."))),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"The target amount is calculated by dividing the average usage by the efficiency target of 80%. For example, if your average usage is 100, and the efficiency target is 80%, then Vantage determines the right size to be ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mfrac",{parentName:"mrow"},(0,s.kt)("mn",{parentName:"mfrac"},"100"),(0,s.kt)("mrow",{parentName:"mfrac"},(0,s.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"."),(0,s.kt)("mn",{parentName:"mrow"},"8")))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\frac{100}{.8}")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1.1901em",verticalAlign:"-0.345em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mopen nulldelimiter"}),(0,s.kt)("span",{parentName:"span",className:"mfrac"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8451em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.655em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},".8")))),(0,s.kt)("span",{parentName:"span",style:{top:"-3.23em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"frac-line",style:{borderBottomWidth:"0.04em"}})),(0,s.kt)("span",{parentName:"span",style:{top:"-3.394em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"100"))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.345em"}},(0,s.kt)("span",{parentName:"span"}))))),(0,s.kt)("span",{parentName:"span",className:"mclose nulldelimiter"})))))),", or ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mn",{parentName:"mrow"},"125")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"125")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"125"))))),"."),(0,s.kt)("li",{parentName:"ul"},"This target amount might exceed the maximum observed usage, which is acceptable to provide room for potential spikes in resource usage. This also prevents containers from being terminated due to resource exhaustion."),(0,s.kt)("li",{parentName:"ul"},"The following values are produced for each container within a workload over the lookback period:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"avg"),": The average usage across all pods of a workload."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"min"),": The average minimum usage across all pods (not the absolute minimum)."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"max"),": The average maximum usage across all pods (not the absolute maximum)."))),(0,s.kt)("li",{parentName:"ul"},"For memory, the average memory value is the average of all recorded average memory usage values over the lookback period. The max memory value is the average of all recorded max memory usage values."),(0,s.kt)("li",{parentName:"ul"},"Every minute, the agent queries node metrics from the Kubernetes control plane, tracking both the total memory used and the highest recorded memory usage. These values are then aggregated over the hour."),(0,s.kt)("li",{parentName:"ul"},"A similar methodology is used for CPU, where ",(0,s.kt)("inlineCode",{parentName:"li"},"container_cpu_usage_seconds_total")," is used to track CPU usage per second, and averages/max values are derived accordingly."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Calculate the potential savings."))),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Savings is the difference between current configuration and target configuration multiplied by a standard hourly base rate."),(0,s.kt)("li",{parentName:"ul"},"For Deployments and StatefulSets, these savings are further multiplied by the number of replicas configured for each controller."),(0,s.kt)("li",{parentName:"ul"},"The calculated amount of savings must be at least $5 to be considered for rightsizing recommendations.")))),(0,s.kt)("p",null,"If you make a configuration change to a pod, the Vantage Kubernetes agent will upload the new configuration for the pod within the hour that it is available. Vantage reruns recommendations once the next Kubernetes ingestion is processed, which is every 24 hours."))}d.isMDXComponent=!0}}]);