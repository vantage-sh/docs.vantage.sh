"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[4910],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=c(n),d=o,u=g["".concat(l,".").concat(d)]||g[d]||m[d]||r;return n?a.createElement(u,i(i({ref:t},p),{},{components:n})):a.createElement(u,i({ref:t},p))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1651:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={id:"connecting_mongodb-atlas",title:"MongoDB Atlas",description:"This page walks through how to integrate Vantage with your MongoDB Atlas account.",toc_min_heading_level:2,toc_max_heading_level:4,keywords:["MongoDB Atlas","Connect MongoDB Atlas"]},i="MongoDB Atlas",s={unversionedId:"connecting_mongodb-atlas",id:"connecting_mongodb-atlas",title:"MongoDB Atlas",description:"This page walks through how to integrate Vantage with your MongoDB Atlas account.",source:"@site/docs/connecting_mongodb-atlas.md",sourceDirName:".",slug:"/connecting_mongodb-atlas",permalink:"/connecting_mongodb-atlas",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_mongodb-atlas.md",tags:[],version:"current",frontMatter:{id:"connecting_mongodb-atlas",title:"MongoDB Atlas",description:"This page walks through how to integrate Vantage with your MongoDB Atlas account.",toc_min_heading_level:2,toc_max_heading_level:4,keywords:["MongoDB Atlas","Connect MongoDB Atlas"]},sidebar:"someSidebar",previous:{title:"New Relic",permalink:"/connecting_new_relic"},next:{title:"Snowflake",permalink:"/connecting_snowflake"}},l={},c=[{value:"Connect Your MongoDB Atlas Account",id:"connect-your-mongodb-atlas-account",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Review the Vantage Integration Page",id:"step-1-review-the-vantage-integration-page",level:3},{value:"Step 2: Obtain Organization ID",id:"step-2-obtain-organization-id",level:3},{value:"Step 3: Create an Organization API Key",id:"step-3-create-an-organization-api-key",level:3},{value:"Step 4: Grant Project Access for Active Resources",id:"step-4-grant-project-access-for-active-resources",level:3},{value:"Next Steps: Manage Workspace Access",id:"next-steps-manage-workspace-access",level:3},{value:"Data Refresh",id:"data-refresh",level:2},{value:"MongoDB Atlas Reporting Dimensions",id:"mongodb-atlas-reporting-dimensions",level:2},{value:"Active Resources",id:"active-resources",level:2}],p={toc:c},g="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(g,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"mongodb-atlas"},"MongoDB Atlas"),(0,o.kt)("p",null,"Vantage integrates with your MongoDB account using the ",(0,o.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/atlas/reference/api-resources-spec/#tag/Invoices"},"Invoices API"),". To see ",(0,o.kt)("a",{parentName:"p",href:"/active_resources"},"Active Resources")," for your MongoDB Atlas account, Vantage uses the ",(0,o.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/atlas/reference/api-resources-spec/#tag/Clusters"},"Clusters API")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/atlas/reference/api-resources-spec/#tag/Projects"},"Projects API"),"."),(0,o.kt)("h2",{id:"connect-your-mongodb-atlas-account"},"Connect Your MongoDB Atlas Account"),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"To create an API key for Vantage to ingest costs, you must be an ",(0,o.kt)("strong",{parentName:"p"},"Organization Owner")," inside the MongoDB Atlas console.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"To add the API key to relevant projects to use Active Resource inventories inside Vantage, you must be a ",(0,o.kt)("strong",{parentName:"p"},"Project Owner")," in the MongoDB Atlas console."),(0,o.kt)("admonition",{parentName:"li",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"For more information on user roles in MongoDB Atlas, see the ",(0,o.kt)("a",{parentName:"p",href:"https://www.mongodb.com/docs/atlas/reference/user-roles/"},"MongoDB Atlas documentation"),".")))),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://console.vantage.sh/signup"},"Create a free Vantage account"),", then follow the steps below to integrate MongoDB Atlas costs."),(0,o.kt)("h3",{id:"step-1-review-the-vantage-integration-page"},"Step 1: Review the Vantage Integration Page"),(0,o.kt)("p",null,"Navigate to the ",(0,o.kt)("a",{parentName:"p",href:"https://console.vantage.sh/settings/mongo"},"MongoDB Atlas Settings")," page in the Vantage console. Then, click ",(0,o.kt)("strong",{parentName:"p"},"Add API Key"),"."),(0,o.kt)("p",null,"You will need to add your ",(0,o.kt)("strong",{parentName:"p"},"Organization ID"),", ",(0,o.kt)("strong",{parentName:"p"},"Public API key"),", and ",(0,o.kt)("strong",{parentName:"p"},"Private API key"),". Detailed steps for obtaining each of these items are provided below. Leave this tab open so you can go back and populate these fields as you obtain each value."),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Add MongoDB information in the Vantage console",width:"80%",src:"/img/connect-mongo/mongodb-vantage-console.png"})),(0,o.kt)("h3",{id:"step-2-obtain-organization-id"},"Step 2: Obtain Organization ID"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In a new browser tab, navigate to the ",(0,o.kt)("a",{parentName:"li",href:"https://account.mongodb.com/account/login"},"MongoDB Atlas console"),"."),(0,o.kt)("li",{parentName:"ol"},"At the top of the page, next to the ",(0,o.kt)("strong",{parentName:"li"},"Organization")," dropdown menu, click the ",(0,o.kt)("strong",{parentName:"li"},"gear icon")," to go to ",(0,o.kt)("strong",{parentName:"li"},"Organization Settings"),".",(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Open Organization Settings in MongoDB Atlas",width:"80%",src:"/img/connect-mongo/mongodb-open-settings.png"})))),(0,o.kt)("li",{parentName:"ol"},"Your ",(0,o.kt)("strong",{parentName:"li"},"Organization ID")," will be displayed at the top. Copy the ",(0,o.kt)("strong",{parentName:"li"},"Organization ID"),". Then, go back to your Vantage browser tab and paste your ID into the ",(0,o.kt)("strong",{parentName:"li"},"Organization ID")," field.",(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Obtain Organization ID in MongoDB Atlas",width:"80%",src:"/img/connect-mongo/mongodb-get-organization-id.png"}))))),(0,o.kt)("h3",{id:"step-3-create-an-organization-api-key"},"Step 3: Create an Organization API Key"),(0,o.kt)("p",null,"Next, you'll create an API key and grant it read-only permissions to your invoices and, optionally, to cluster-level cost data."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"From the left navigation menu, click ",(0,o.kt)("strong",{parentName:"p"},"Access Manager"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"At the top, click ",(0,o.kt)("strong",{parentName:"p"},"Create API Key"),"."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"View Access Manager in MongoDB Atlas",width:"100%",src:"/img/connect-mongo/mongodb-manage-access.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("strong",{parentName:"p"},"Create API Key")," screen, configure the following details:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"For ",(0,o.kt)("strong",{parentName:"li"},"Description"),", enter a name, like ",(0,o.kt)("em",{parentName:"li"},"Vantage Integration"),"."),(0,o.kt)("li",{parentName:"ul"},"For ",(0,o.kt)("strong",{parentName:"li"},"Organization Permissions"),", select ",(0,o.kt)("strong",{parentName:"li"},"Organization Billing Viewer")," and ",(0,o.kt)("strong",{parentName:"li"},"Organization Read Only"),".")),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Edit API key permissions in MongoDB Atlas",width:"80%",src:"/img/connect-mongo/mongodb-organization-read-only.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Next"),". Your public and private keys are displayed. Copy the keys and paste them into the ",(0,o.kt)("strong",{parentName:"p"},"Public API key")," and ",(0,o.kt)("strong",{parentName:"p"},"Private API key")," fields in Vantage."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Copy API keys in MongoDB Atlas",width:"80%",src:"/img/connect-mongo/mongodb-copy-api-key-private.png"}))),(0,o.kt)("admonition",{parentName:"li",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If your organization requires an IP Access List for access control, you will need to add each of the following IPs to the ",(0,o.kt)("strong",{parentName:"p"},"API Access List")," section. Add each IP address individually:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre"},"54.87.66.45\n3.95.43.133\n54.162.3.72\n44.199.143.63\n3.218.103.23\n")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Copy API keys in MongoDB Atlas",width:"80%",src:"/img/connect-mongo/mongodb-api-access-list.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"At the bottom, click ",(0,o.kt)("strong",{parentName:"p"},"Done"),"."))),(0,o.kt)("p",null,"If you want to have Vantage ingest per-cluster resource data from MongoDB Atlas, then proceed to the next section. Otherwise, back in the Vantage console, click ",(0,o.kt)("strong",{parentName:"p"},"Add Key"),"."),(0,o.kt)("h3",{id:"step-4-grant-project-access-for-active-resources"},"Step 4: Grant Project Access for Active Resources"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left navigation menu, select ",(0,o.kt)("strong",{parentName:"p"},"Projects")," to see your list of Atlas projects. Select your project from the list."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Open MongoDB Atlas projects",width:"80%",src:"/img/connect-mongo/mongodb-projects.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"At the top, click ",(0,o.kt)("strong",{parentName:"p"},"Access Manager"),", then select the project.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Invite to Project"),"."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Invite to project in MongoDB Atlas",width:"100%",src:"/img/connect-mongo/mongodb-project-access.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Search for and select the Vantage Integration API key to add it to the project."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Add Vantage key to MongoDB Atlas project",width:"80%",src:"/img/connect-mongo/mongodb-search-integration.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Grant the Vantage Integration API key ",(0,o.kt)("strong",{parentName:"p"},"Project Read Only")," access. Then, click ",(0,o.kt)("strong",{parentName:"p"},"Invite to Project"),". Repeat this process for any other projects where you want to see resource-level costs."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,o.kt)("img",{alt:"Grant API key read-only access to project",width:"80%",src:"/img/connect-mongo/mongodb-project-read-only.png"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Back in the Vantage console, click ",(0,o.kt)("strong",{parentName:"p"},"Add Key"),". "))),(0,o.kt)("p",null,"Your MongoDB Atlas integration status should automatically update from ",(0,o.kt)("inlineCode",{parentName:"p"},"Pending")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"Importing"),". If you've successfully granted project access for active resources, your Active Resources view will begin populating with cost data."),(0,o.kt)("h3",{id:"next-steps-manage-workspace-access"},"Next Steps: Manage Workspace Access"),(0,o.kt)("p",null,"Once your costs are imported, select which workspaces this integration is associated with. See the ",(0,o.kt)("a",{parentName:"p",href:"/workspaces#integration-workspace"},"Workspaces")," documentation for information."),(0,o.kt)("h2",{id:"data-refresh"},"Data Refresh"),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"/provider_data_refresh"},"provider data refresh documentation")," for information on when data for each provider refreshes in Vantage."),(0,o.kt)("h2",{id:"mongodb-atlas-reporting-dimensions"},"MongoDB Atlas Reporting Dimensions"),(0,o.kt)("p",null,"On MongoDB Atlas ",(0,o.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", you can filter across several dimensions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Project (project ID)"),(0,o.kt)("li",{parentName:"ul"},"Category (Atlas Cluster - Atlas Instance M2)"),(0,o.kt)("li",{parentName:"ul"},"Tag (includes MongoDB tags and ",(0,o.kt)("a",{parentName:"li",href:"/tagging"},"virtual tags")," created in Vantage for this provider)"),(0,o.kt)("li",{parentName:"ul"},"Resource (service resource ID)"),(0,o.kt)("li",{parentName:"ul"},"Charge Type (e.g., Usage)"),(0,o.kt)("li",{parentName:"ul"},"Organization (organization name)"),(0,o.kt)("li",{parentName:"ul"},"Service (e.g., REALM)")),(0,o.kt)("h2",{id:"active-resources"},"Active Resources"),(0,o.kt)("p",null,"MongoDB Atlas clusters are synced as active resources and available in ",(0,o.kt)("a",{parentName:"p",href:"/active_resources"},"resource reports"),"."))}m.isMDXComponent=!0}}]);