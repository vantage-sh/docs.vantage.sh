"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[2057],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),p=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),d=n,g=u["".concat(s,".").concat(d)]||u[d]||m[d]||r;return a?o.createElement(g,i(i({ref:t},c),{},{components:a})):o.createElement(g,i({ref:t},c))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:n,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3716:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var o=a(7462),n=(a(7294),a(3905));const r={id:"connecting_temporal",title:"Temporal Cloud",description:"This page walks through how to integrate Vantage with your Temporal Cloud account.",toc_max_heading_level:4,keywords:["Temporal","Connect Temporal Cloud"]},i="Temporal Cloud",l={unversionedId:"connecting_temporal",id:"connecting_temporal",title:"Temporal Cloud",description:"This page walks through how to integrate Vantage with your Temporal Cloud account.",source:"@site/docs/connecting_temporal.md",sourceDirName:".",slug:"/connecting_temporal",permalink:"/connecting_temporal",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_temporal.md",tags:[],version:"current",frontMatter:{id:"connecting_temporal",title:"Temporal Cloud",description:"This page walks through how to integrate Vantage with your Temporal Cloud account.",toc_max_heading_level:4,keywords:["Temporal","Connect Temporal Cloud"]},sidebar:"someSidebar",previous:{title:"ClickHouse Cloud",permalink:"/connecting_clickhouse"},next:{title:"Custom Providers",permalink:"/connecting_custom_providers"}},s={},p=[{value:"How Temporal Cloud Costs Are Calculated",id:"cost-calculation",level:2},{value:"Connect Your Temporal Cloud Account",id:"connect-your-temporal-cloud-account",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create the Connection",id:"create-the-connection",level:3},{value:"Step 1: Create a Service Account",id:"step-1-create-a-service-account",level:4},{value:"Step 2: Create an API Key for the Service Account",id:"step-2-create-an-api-key-for-the-service-account",level:4},{value:"Step 3: Add Your API Key and Pricing Details to Vantage",id:"vantage-console",level:4},{value:"Temporal Cloud Discounts and Other Fees",id:"temporal-cloud-discounts-and-other-fees",level:3},{value:"Update Custom Rates",id:"update-custom-rates",level:2},{value:"Next Steps: Manage Workspace Access",id:"next-steps-manage-workspace-access",level:3},{value:"Use Case: Associate Temporal Cloud Namespaces with Infrastructure Costs Using Virtual Tags",id:"use-case-associate-temporal-cloud-namespaces-with-infrastructure-costs-using-virtual-tags",level:2},{value:"Data Refresh",id:"data-refresh",level:2},{value:"Temporal Cloud Reporting Dimensions",id:"temporal-cloud-reporting-dimensions",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"temporal-cloud"},"Temporal Cloud"),(0,n.kt)("p",null,"Vantage connects to Temporal Cloud through a ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/service-accounts"},"service account"),", with the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/users#account-level-roles"},"Finance Admin role"),", using an associated API key for the service account. After authorizing Vantage access to your Temporal Cloud account, Vantage will begin ingesting data using the Usage endpoint of the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/ops"},"Temporal\xa0Cloud Operations API"),". All credentials are encrypted. Vantage then uses the data from the Usage API to calculate costs based on public price sheets available from Temporal Cloud or custom inputs. "),(0,n.kt)("p",null,"You can connect multiple Temporal Cloud integrations by providing API keys for multiple accounts."),(0,n.kt)("h2",{id:"cost-calculation"},"How Temporal Cloud Costs Are Calculated"),(0,n.kt)("p",null,"During the Temporal Cloud integration, Vantage prompts you to enter custom rates for Actions, Active Storage, and Retained Storage. By default, Vantage applies public pricing and the base rate for Actions (under 5M per month). If you exceed 5M Actions and don\u2019t have a private rate card, you can calculate your blended rates by dividing your total costs by the usage on your bill. "),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Actions rates are measured in millions of Actions; Active and Retained Storage rates are measured in Gigabyte-Hours. At this time, this integration does not account for any Actions included in the plan.")),(0,n.kt)("p",null,"If you have a custom rate for Temporal Cloud, you can enter your enterprise rate in the ",(0,n.kt)("a",{parentName:"p",href:"/connecting_temporal#vantage-console"},"integration settings"),". Vantage multiplies your custom rates by the usage from the Temporal Cloud Usage API to calculate your costs. You can update your rates anytime on the ",(0,n.kt)("a",{parentName:"p",href:"/connecting_temporal#update-custom-rates"},"Settings page")," in Vantage. "),(0,n.kt)("h2",{id:"connect-your-temporal-cloud-account"},"Connect Your Temporal Cloud Account"),(0,n.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You need the ",(0,n.kt)("a",{parentName:"li",href:"https://docs.temporal.io/cloud/users#account-level-roles"},"Account Owner")," role in Temporal Cloud to create a dedicated service account for the Vantage integration, assign it the Finance Admin role, and create the associated API key.",(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"The Finance Admin role has the same permissions as Account Read-only users, with additional permissions to view ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/billing-and-cost"},"billing")," information and update payment information. Vantage will never perform any actions to change your payment method. It's recommended that you submit a feature request to Temporal Cloud for improved permission scoping, and Vantage will adopt fine-grained permissions if this becomes available."))),(0,n.kt)("li",{parentName:"ul"},"Create a free Vantage account, then follow the steps below to integrate Temporal Cloud costs. ")),(0,n.kt)("h3",{id:"create-the-connection"},"Create the Connection"),(0,n.kt)("p",null,"To create an integration with Temporal Cloud and Vantage, you need to create a service account and an API key for that service account. "),(0,n.kt)("h4",{id:"step-1-create-a-service-account"},"Step 1: Create a Service Account"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The below instructions are based on the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/service-accounts#create-a-service-account"},"Temporal Cloud documentation"),".")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In Temporal Cloud, navigate to ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://cloud.temporal.io/settings/identities"},"Settings > Identities")),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"At the top, click ",(0,n.kt)("strong",{parentName:"p"},"Create Service Account"),". "),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Creating a Temporal Service Account",width:"100%",src:"/img/temporal-create-service-account.png"})," "))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Enter an ",(0,n.kt)("strong",{parentName:"p"},"Identity Name"),", such as ",(0,n.kt)("em",{parentName:"p"},"vantage_integration"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Add an optional description to identify this account.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"For ",(0,n.kt)("strong",{parentName:"p"},"Account Level Role"),", select ",(0,n.kt)("strong",{parentName:"p"},"Finance Admin"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"For ",(0,n.kt)("strong",{parentName:"p"},"Namespace Permissions"),", set the access for each namespace to ",(0,n.kt)("strong",{parentName:"p"},"Read-Only"),"."),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Setting up the Temporal service account with relevant permissions",width:"100%",src:"/img/temporal-service-account.png"})," ")),(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If additional namespaces are added after you create this service account, and you want them included in your integration, you will need to go back and update the permissions to account for these new namespaces."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click ",(0,n.kt)("strong",{parentName:"p"},"Create Service Account"),". Once created, you will be prompted to create an API key for the service account."))),(0,n.kt)("h4",{id:"step-2-create-an-api-key-for-the-service-account"},"Step 2: Create an API Key for the Service Account"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"The below instructions are based on the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/api-keys"},"Temporal Cloud documentation"),".")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"After you create the service account, you will be prompted to create an API key. You can also create an API key for the service account at any time. Navigate to ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://cloud.temporal.io/settings/api-keys"},"Settings > API keys")),". "),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"Create API Key"),". ",(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Creating a new Temporal API key",width:"100%",src:"/img/temporal-create-api.png"})," "))),(0,n.kt)("li",{parentName:"ol"},"Under ",(0,n.kt)("strong",{parentName:"li"},"Create an API key for"),", select ",(0,n.kt)("strong",{parentName:"li"},"Service Account"),"."),(0,n.kt)("li",{parentName:"ol"},"For ",(0,n.kt)("strong",{parentName:"li"},"Mapped to Identity"),", search for and select the service account you just created."),(0,n.kt)("li",{parentName:"ol"},"Give the API key a ",(0,n.kt)("strong",{parentName:"li"},"Name")," and optional ",(0,n.kt)("strong",{parentName:"li"},"Description"),"."),(0,n.kt)("li",{parentName:"ol"},"For ",(0,n.kt)("strong",{parentName:"li"},"Expiry Date"),", select a date for when the key should expire. ",(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"At this time, Temporal Cloud API keys can be configured to be valid for up to 2 years, after which you'll need to rotate your Temporal Cloud API key in the Vantage console.")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Creating a new Temporal API key with relevant permissions",width:"100%",src:"/img/temporal-create-api-key.png"})," "))),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"Generate API Key")," and copy the newly generated key.")),(0,n.kt)("h4",{id:"vantage-console"},"Step 3: Add Your API Key and Pricing Details to Vantage"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From the top navigation in Vantage, click ",(0,n.kt)("strong",{parentName:"p"},"Settings"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the left navigation, select ",(0,n.kt)("strong",{parentName:"p"},"Integrations")," > ",(0,n.kt)("strong",{parentName:"p"},"Temporal Cloud"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The Temporal Cloud integrations page is displayed. Ensure you are on the ",(0,n.kt)("strong",{parentName:"p"},"Connect")," tab.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"At the bottom of the page, click ",(0,n.kt)("strong",{parentName:"p"},"Add API Key")," and paste your newly generated API key. Optionally, add a ",(0,n.kt)("strong",{parentName:"p"},"Description")," to identify this integration.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If you use over 5M Actions or have custom rates, you can enter your blended rates on the form. By default, these fields are pre-filled with Temporal Cloud\u2019s public pricing. If you don't have a private rate card or use under 5M Actions, you can leave these fields as-is. See the ",(0,n.kt)("a",{parentName:"p",href:"/connecting_temporal#cost-calculation"},"How Temporal Cloud Costs Are Calculated")," section for details. "),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Price Per Action"),(0,n.kt)("li",{parentName:"ul"},"Price Per Gigabyte-hour of Active Storage"),(0,n.kt)("li",{parentName:"ul"},"Price Per Gigabyte-hour of Retained Storage")),(0,n.kt)("admonition",{parentName:"li",type:"note"},(0,n.kt)("p",{parentName:"admonition"},"You can also update these rates after you complete the integration. See the ",(0,n.kt)("a",{parentName:"p",href:"/connecting_temporal#update-custom-rates"},"Update Custom Rates")," section for details. ")),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Adding all credentials and custom rates in the Vantage console",width:"100%",src:"/img/temporal-vantage-console.png"})," "))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click ",(0,n.kt)("strong",{parentName:"p"},"Connect Account"),". "))),(0,n.kt)("p",null,"Costs will be ingested and processed as soon as you add the integration. It usually takes less than 15 minutes to ingest Temporal Cloud costs. As soon as they are processed, they will be available on your All Resources Cost Report. "),(0,n.kt)("p",null,"After the integration is complete, two full months plus the current month to date of historical cost data will be imported from Temporal Cloud. Historical data will be priced at the custom rates provided in the integration settings. Vantage will retain cost and usage data to match your retention period for all providers. "),(0,n.kt)("p",null,"If you decide to remove your Temporal Cloud integration from Vantage, all costs associated with your Temporal Cloud API key will be removed from the Vantage console."),(0,n.kt)("h3",{id:"temporal-cloud-discounts-and-other-fees"},"Temporal Cloud Discounts and Other Fees"),(0,n.kt)("p",null,"The Temporal Cloud Usage API returns only usage information, which Vantage uses to calculate spend, and does not include separate line items for taxes, discounts, or credits. You can choose whether these line items are included in your calculated cost based on the blended rates you input in the integration settings."),(0,n.kt)("p",null,"In addition, Vantage does not have insights into what is covered by committed spend; all costs are shown based on the blended rate provided in the integration settings."),(0,n.kt)("p",null,"Vantage also does not include ",(0,n.kt)("a",{parentName:"p",href:"https://docs.temporal.io/cloud/pricing#base_plans"},"Plan Costs")," as a part of Temporal Cloud costs. You can use the ",(0,n.kt)("a",{parentName:"p",href:"/connecting_custom_providers"},"Custom Providers")," integration to represent your costs that are outside your usage costs. You can then use cost-based and business metrics-based ",(0,n.kt)("a",{parentName:"p",href:"https://docs.vantage.sh/tagging/#cost-based-and-business-metrics-based-allocation-tags"},"cost allocation")," to allocate these costs across teams."),(0,n.kt)("h2",{id:"update-custom-rates"},"Update Custom Rates"),(0,n.kt)("p",null,"After you complete the integration, you can update your custom rates if they ever change. To update your rates:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Navigate to the Temporal Cloud ",(0,n.kt)("a",{parentName:"li",href:"https://console.vantage.sh/settings/temporal"},"settings page"),"."),(0,n.kt)("li",{parentName:"ol"},"Select your integration from the list. "),(0,n.kt)("li",{parentName:"ol"},"Scroll down to the ",(0,n.kt)("strong",{parentName:"li"},"Custom Rates")," section."),(0,n.kt)("li",{parentName:"ol"},"Update your rates accordingly, then click ",(0,n.kt)("strong",{parentName:"li"},"Save"),".",(0,n.kt)("details",null,(0,n.kt)("summary",null,"Expand to view example image"),(0,n.kt)("div",null,(0,n.kt)("img",{alt:"Editing rates for the Temporal Cloud integration in Vantage",width:"100%",src:"/img/temporal-edit-rates.png"})," ")))),(0,n.kt)("p",null,"When you update your custom rate, your historical data will be reprocessed with the updated rate, and any Cost Report with Temporal Cloud costs will display the new rate that you have input. All future costs that are imported will use the new custom rate. "),(0,n.kt)("h3",{id:"next-steps-manage-workspace-access"},"Next Steps: Manage Workspace Access"),(0,n.kt)("p",null,"Once your costs are imported, select which workspaces this integration is associated with. See the ",(0,n.kt)("a",{parentName:"p",href:"/workspaces#integration-workspace"},"Workspaces")," documentation for information."),(0,n.kt)("h2",{id:"use-case-associate-temporal-cloud-namespaces-with-infrastructure-costs-using-virtual-tags"},"Use Case: Associate Temporal Cloud Namespaces with Infrastructure Costs Using Virtual Tags"),(0,n.kt)("p",null,"If your teams are running workloads across Temporal Cloud and other infrastructure providers, you can use ",(0,n.kt)("a",{parentName:"p",href:"/tagging"},"Virtual Tags")," in Vantage to group and analyze total application costs."),(0,n.kt)("p",null,"For example, you may want to track the total costs for the Payments team, which operates multiple workloads in Temporal Cloud. By creating a Virtual Tag with the key ",(0,n.kt)("inlineCode",{parentName:"p"},"Team")," and the value ",(0,n.kt)("inlineCode",{parentName:"p"},"Payments"),", you can apply a filter to group together things like Temporal Cloud costs filtered by the ",(0,n.kt)("inlineCode",{parentName:"p"},"payments-prod")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"payments-staging")," namespaces."),(0,n.kt)("p",null,"You can view all namespaces using the ",(0,n.kt)("strong",{parentName:"p"},"Resource")," filter/grouping criteria on a Cost Report."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"See the following example in the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/vantage-sh/finops-as-code/tree/main/terraform/temporal-costs"},"FinOps as Code repository")," for steps on how to set up a tagging schema for teams and namespaces using the Vantage Terraform provider.")),(0,n.kt)("h2",{id:"data-refresh"},"Data Refresh"),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",{parentName:"p",href:"/provider_data_refresh"},"provider data refresh documentation")," for information on when data for each provider refreshes in Vantage."),(0,n.kt)("h2",{id:"temporal-cloud-reporting-dimensions"},"Temporal Cloud Reporting Dimensions"),(0,n.kt)("p",null,"On Temporal Cloud\xa0",(0,n.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", you can filter across several dimensions:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Organization (i.e., Temporal Cloud organization name)"),(0,n.kt)("li",{parentName:"ul"},"Service (e.g., Temporal Cloud)"),(0,n.kt)("li",{parentName:"ul"},"Charge Type (e.g., Usage)"),(0,n.kt)("li",{parentName:"ul"},"Category (e.g., Actions)"),(0,n.kt)("li",{parentName:"ul"},"Subcategory (e.g., Retained Storage)"),(0,n.kt)("li",{parentName:"ul"},"Resource ID (e.g., Namespace)"),(0,n.kt)("li",{parentName:"ul"},"Tags (Temporal Cloud Tags or ",(0,n.kt)("a",{parentName:"li",href:"/tagging"},"Virtual Tags")," created in Vantage)")))}m.isMDXComponent=!0}}]);