"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[1641],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=r,d=u["".concat(l,".").concat(m)]||u[m]||g[m]||o;return a?n.createElement(d,i(i({ref:t},c),{},{components:a})):n.createElement(d,i({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7671:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={id:"connecting_grafana",title:"Grafana Cloud",description:"This page walks through how to integrate Vantage with your Grafana account.",keywords:["Grafana","Connect Grafana"]},i="Grafana Cloud",s={unversionedId:"connecting_grafana",id:"connecting_grafana",title:"Grafana Cloud",description:"This page walks through how to integrate Vantage with your Grafana account.",source:"@site/docs/connecting_grafana.md",sourceDirName:".",slug:"/connecting_grafana",permalink:"/connecting_grafana",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_grafana.md",tags:[],version:"current",frontMatter:{id:"connecting_grafana",title:"Grafana Cloud",description:"This page walks through how to integrate Vantage with your Grafana account.",keywords:["Grafana","Connect Grafana"]},sidebar:"someSidebar",previous:{title:"OpenAI",permalink:"/connecting_open_ai"},next:{title:"ClickHouse Cloud",permalink:"/connecting_clickhouse"}},l={},p=[{value:"Connect Your Grafana Cloud Account",id:"connect-your-grafana-cloud-account",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create the Connection",id:"create-the-connection",level:3},{value:"Next Steps: Manage Workspace Access",id:"next-steps-manage-workspace-access",level:3},{value:"Data Refresh",id:"data-refresh",level:2},{value:"Grafana Costs on Cost Reports",id:"grafana-costs-on-cost-reports",level:2},{value:"Grafana Reporting Dimensions",id:"grafana-reporting-dimensions",level:2}],c={toc:p},u="wrapper";function g(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"grafana-cloud"},"Grafana Cloud"),(0,r.kt)("p",null,"Vantage connects to your Grafana Cloud account via a customer-generated read-only token attached to a cloud access policy, which allows Vantage to ingest Grafana Cloud usage costs. Vantage displays Grafana Cloud costs and associated ",(0,r.kt)("a",{parentName:"p",href:"/usage_based_reporting"},"usage metrics"),", like GB of Traces, Log Retention GB-Month, or number of Incident Response and Management Users, directly in line with other infrastructure costs."),(0,r.kt)("p",null,"You can integrate multiple Grafana Cloud integrations by providing read-only tokens for multiple organizations."),(0,r.kt)("h2",{id:"connect-your-grafana-cloud-account"},"Connect Your Grafana Cloud Account"),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://console.vantage.sh/signup"},"Create a free Vantage account"),", then follow the steps below to integrate Grafana Cloud costs."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Vantage cannot perform writes to your Grafana Cloud organization. Vantage is only able to see metadata associated with your usage.")),(0,r.kt)("h3",{id:"create-the-connection"},"Create the Connection"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to ",(0,r.kt)("a",{parentName:"p",href:"https://grafana.com/"},"grafana.com")," and log in to your account.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the left, under ",(0,r.kt)("strong",{parentName:"p"},"SECURITY"),", select ",(0,r.kt)("strong",{parentName:"p"},"Access Policies"),". "),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Grafana Cloud portal",width:"100%",src:"/img/grafana-portal.png"})," "))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At the top of the page, click ",(0,r.kt)("strong",{parentName:"p"},"Create access policy"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"For ",(0,r.kt)("strong",{parentName:"p"},"Display name")," and ",(0,r.kt)("strong",{parentName:"p"},"Name"),", enter ",(0,r.kt)("em",{parentName:"p"},"vantage"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"For ",(0,r.kt)("strong",{parentName:"p"},"Realms"),", select ",(0,r.kt)("strong",{parentName:"p"},"all stacks"),", or select individual stacks if you want only certain stacks associated with the integration.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Under ",(0,r.kt)("strong",{parentName:"p"},"Scopes"),", add the ",(0,r.kt)("inlineCode",{parentName:"p"},"billing-metrics:read")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"orgs:read")," scopes. (You may need to search for these scopes in the ",(0,r.kt)("strong",{parentName:"p"},"Add scope")," search box below the checklist.)"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Grafana cloud access policy screen",width:"60%",src:"/img/grafana-cap.png"})," ")),(0,r.kt)("admonition",{parentName:"li",type:"note"},(0,r.kt)("p",{parentName:"admonition"}," If you have any IP restrictions on this instance, ensure you allow the following IP addresses for Vantage:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"54.87.66.45")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"3.95.43.133")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"54.162.3.72")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"44.199.143.63")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"3.218.103.23"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Create"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The new access policy is created. On the access policy tile, click ",(0,r.kt)("strong",{parentName:"p"},"Add token"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Give the token a name and select an expiration date. If the key expires, you will need to update your integration in Vantage with a new API token.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Create"),", then copy the new token.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"From the top navigation in Vantage, click ",(0,r.kt)("strong",{parentName:"p"},"Settings"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the left navigation, select ",(0,r.kt)("strong",{parentName:"p"},"Integrations")," and select ",(0,r.kt)("strong",{parentName:"p"},"Grafana Cloud"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The Grafana Cloud integrations page is displayed. Ensure you are on the ",(0,r.kt)("strong",{parentName:"p"},"Connect")," tab.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At the bottom of the page, click ",(0,r.kt)("strong",{parentName:"p"},"Add API Key")," and paste your newly generated token.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"For ",(0,r.kt)("strong",{parentName:"p"},"Organization slug"),", enter the organization name that appears in your Grafana organization URL (e.g., in ",(0,r.kt)("inlineCode",{parentName:"p"},"https://grafana.com/orgs/vantagesh"),", enter only ",(0,r.kt)("inlineCode",{parentName:"p"},"vantagesh"),").")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click ",(0,r.kt)("strong",{parentName:"p"},"Connect Account"),"."))),(0,r.kt)("p",null,"Costs will be ingested and processed as soon as you add the integration. It usually takes less than 15 minutes to ingest Grafana Cloud costs. As soon as they are processed, they will be available on your All Resources Cost Report. If you decide to remove your Grafana Cloud integration from Vantage, all costs associated with your Grafana Cloud API key will be removed from the Vantage console."),(0,r.kt)("h3",{id:"next-steps-manage-workspace-access"},"Next Steps: Manage Workspace Access"),(0,r.kt)("p",null,"Once your costs are imported, select which workspaces this integration is associated with. See the ",(0,r.kt)("a",{parentName:"p",href:"/workspaces#integration-workspace"},"Workspaces")," documentation for information."),(0,r.kt)("h2",{id:"data-refresh"},"Data Refresh"),(0,r.kt)("p",null,"See the ",(0,r.kt)("a",{parentName:"p",href:"/provider_data_refresh"},"provider data refresh documentation")," for information on when data for each provider refreshes in Vantage."),(0,r.kt)("h2",{id:"grafana-costs-on-cost-reports"},"Grafana Costs on Cost Reports"),(0,r.kt)("p",null,"Due to Grafana\u2019s billing process, billing data for the current month becomes available only on the 1st of the following month. Grafana Cloud costs are not amortized across the month; therefore, it is recommended that you view Grafana costs and usage using the ",(0,r.kt)("strong",{parentName:"p"},"Monthly")," date binning."),(0,r.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,r.kt)("img",{alt:"",width:"90%",src:"/img/grafana-report.png"})),(0,r.kt)("h2",{id:"grafana-reporting-dimensions"},"Grafana Reporting Dimensions"),(0,r.kt)("p",null,"On Grafana ",(0,r.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", you can filter across several dimensions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Service (e.g., Metrics, Traces, Logs)"),(0,r.kt)("li",{parentName:"ul"},"Category (Specific usage category, like Hosted Metrics Usage or Hosted Logs Usage)"),(0,r.kt)("li",{parentName:"ul"},"Organization"),(0,r.kt)("li",{parentName:"ul"},"Account ID (Grafana stack)"),(0,r.kt)("li",{parentName:"ul"},"Tags (",(0,r.kt)("a",{parentName:"li",href:"/tagging"},"Virtual Tags"),"\xa0created in Vantage)"),(0,r.kt)("li",{parentName:"ul"},"Charge Type (e.g., usage)")))}g.isMDXComponent=!0}}]);