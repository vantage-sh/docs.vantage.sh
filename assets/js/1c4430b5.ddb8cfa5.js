"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[7723],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=p(n),g=r,d=u["".concat(c,".").concat(g)]||u[g]||m[g]||i;return n?a.createElement(d,l(l({ref:t},s),{},{components:n})):a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=g;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[u]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},1325:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={id:"connecting_azure_mca",title:"Azure MCA Account",description:"This page walks through how to connect your Azure MCA account to Vantage.",keywords:["Azure MCA","Connect Azure"]},l="Azure MCA Account",o={unversionedId:"connecting_azure_mca",id:"connecting_azure_mca",title:"Azure MCA Account",description:"This page walks through how to connect your Azure MCA account to Vantage.",source:"@site/docs/connecting_azure_mca.md",sourceDirName:".",slug:"/connecting_azure_mca",permalink:"/connecting_azure_mca",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_azure_mca.md",tags:[],version:"current",frontMatter:{id:"connecting_azure_mca",title:"Azure MCA Account",description:"This page walks through how to connect your Azure MCA account to Vantage.",keywords:["Azure MCA","Connect Azure"]},sidebar:"someSidebar",previous:{title:"Azure",permalink:"/connecting_azure"},next:{title:"Azure EA Account",permalink:"/connecting_azure_ea"}},c={},p=[{value:"Step 1: Create a New Application Registration",id:"mca-step1",level:2},{value:"Step 2: Generate a Client Secret",id:"mca-step2",level:2},{value:"Step 3: Obtain Your Billing Account ID",id:"mca-step3",level:2},{value:"Step 4: Assign the Billing Account Reader Role to the Service Principal",id:"mca-step4",level:2},{value:"Step 5: Add App Registration Credentials to Vantage",id:"mca-step5",level:2},{value:"Next Steps: Workspace Access",id:"next-steps-workspace-access",level:2}],s={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"azure-mca-account"},"Azure MCA Account"),(0,r.kt)("p",null,"With the Azure MCA integration, you allow the Vantage service principal to have access at the billing scope level."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"When you configure this integration, the Vantage service principal is granted ",(0,r.kt)("strong",{parentName:"p"},"billing account reader")," permissions. The service principal does ",(0,r.kt)("em",{parentName:"p"},"not")," have permissions\u2014nor will it ever attempt\u2014to make any changes to your infrastructure.")),(0,r.kt)("p",null,"To integrate your Azure MCA account with Vantage, follow the below steps:"),(0,r.kt)("table",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"1")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step1"},"Create a new application registration"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"2")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step2"},"Generate a client secret"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"3")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step3"},"Obtain your billing account ID"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"4")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step4"},"Assign the billing account reader role to the service principal"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"5")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step5"},"Add app registration credentials to the Vantage console"))),(0,r.kt)("tr",null,(0,r.kt)("td",null,(0,r.kt)("b",null,"6")),(0,r.kt)("td",null,(0,r.kt)("a",{href:"/connecting_azure_mca#mca-step6"},"Send your billing account ID to Vantage")))),(0,r.kt)("h2",{id:"mca-step1"},"Step 1: Create a New Application Registration"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"From the main page of the Azure portal, search for and navigate to ",(0,r.kt)("strong",{parentName:"li"},"Microsoft Entra ID"),"."),(0,r.kt)("li",{parentName:"ol"},"In the left navigation, under ",(0,r.kt)("strong",{parentName:"li"},"Manage"),", select ",(0,r.kt)("strong",{parentName:"li"},"App registrations"),"."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"+ New registration"),".",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Azure portal with App Registration menu option selected",width:"100%",src:"/img/connect-azure/azure-new-app-registration.png"})," "))),(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("strong",{parentName:"li"},"Register an application")," screen is displayed. For ",(0,r.kt)("strong",{parentName:"li"},"Name"),", enter ",(0,r.kt)("em",{parentName:"li"},"vantage"),"."),(0,r.kt)("li",{parentName:"ol"},"Leave all other settings as their defaults and click ",(0,r.kt)("strong",{parentName:"li"},"Register"),".",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Azure portal the Register an application screen and vantage entered as app name",width:"100%",src:"/img/connect-azure/azure-register-app.png"})," "))),(0,r.kt)("li",{parentName:"ol"},"The app details are displayed. Record the ",(0,r.kt)("strong",{parentName:"li"},"Application (client) ID")," and ",(0,r.kt)("strong",{parentName:"li"},"Directory (tenant) ID")," to use later.",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Azure portal with the client ID and tenant ID displayed and highlighted",width:"100%",src:"/img/connect-azure/azure-app-ids.png"})," ")))),(0,r.kt)("h2",{id:"mca-step2"},"Step 2: Generate a Client Secret"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"On the same page, next to the ",(0,r.kt)("strong",{parentName:"li"},"Client credentials")," field, click ",(0,r.kt)("strong",{parentName:"li"},"Add a certificate or secret"),". (You can also access the ",(0,r.kt)("strong",{parentName:"li"},"Certificates and secrets")," screen from the left navigation menu.)"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"+ New client secret"),"."),(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("strong",{parentName:"li"},"Add a client secret")," pane is displayed. For ",(0,r.kt)("strong",{parentName:"li"},"Description"),", enter a description, such as ",(0,r.kt)("em",{parentName:"li"},"vantage-secret"),".",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Azure portal with the Azure client secret window open and a new secreted created called vantage-secret",width:"100%",src:"/img/connect-azure/azure-client-secret.png"})," "))),(0,r.kt)("li",{parentName:"ol"},"For ",(0,r.kt)("strong",{parentName:"li"},"Expires"),", select an expiration option for the secret.",(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"If this secret expires, you will need to supply Vantage with a new secret ",(0,r.kt)("em",{parentName:"p"},"before")," the expiration date."))),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add"),"."),(0,r.kt)("li",{parentName:"ol"},"The newly created secret is displayed. Copy the secret's ",(0,r.kt)("strong",{parentName:"li"},"Value")," to add to the Vantage console later. This value will be displayed only one time.")),(0,r.kt)("h2",{id:"mca-step3"},"Step 3: Obtain Your Billing Account ID"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("strong",{parentName:"li"},"Cost Management + Billing"),"."),(0,r.kt)("li",{parentName:"ol"},"On the left menu, click ",(0,r.kt)("strong",{parentName:"li"},"Billing scopes")," and select your ",(0,r.kt)("strong",{parentName:"li"},"MCA Billing Account")," from the list."),(0,r.kt)("li",{parentName:"ol"},"On the left menu, click ",(0,r.kt)("strong",{parentName:"li"},"Settings")," > ",(0,r.kt)("strong",{parentName:"li"},"Properties"),"."),(0,r.kt)("li",{parentName:"ol"},"Copy your ",(0,r.kt)("strong",{parentName:"li"},"Billing account id")," to add to the Vantage console later.",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Azure portal with the billing account id highlighted",width:"100%",src:"/img/connect-azure/azure-billing-id.png"})," "),(0,r.kt)("i",null,"Source: Microsoft")))),(0,r.kt)("h2",{id:"mca-step4"},"Step 4: Assign the Billing Account Reader Role to the Service Principal"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"From the left menu, select ",(0,r.kt)("strong",{parentName:"li"},"Access Control (IAM)"),"."),(0,r.kt)("li",{parentName:"ol"},"At the top, click ",(0,r.kt)("strong",{parentName:"li"},"Add"),"."),(0,r.kt)("li",{parentName:"ol"},"On the right ",(0,r.kt)("strong",{parentName:"li"},"Add role assignment")," pane, select ",(0,r.kt)("strong",{parentName:"li"},"Billing account reader"),".",(0,r.kt)("details",null,(0,r.kt)("summary",null,"Expand to view example image"),(0,r.kt)("div",null,(0,r.kt)("img",{alt:"Adding the billing account reader role for the service principal",width:"100%",src:"/img/connect-azure/azure-billing-account-reader.png"})," "))),(0,r.kt)("li",{parentName:"ol"},"Under ",(0,r.kt)("strong",{parentName:"li"},"Users, groups, or apps"),", search for and select the ",(0,r.kt)("em",{parentName:"li"},"vantage")," service principal that was generated when you created the app registration in ",(0,r.kt)("a",{parentName:"li",href:"/connecting_azure_mca#mca-step1"},"step 1"),"."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add"),".")),(0,r.kt)("h2",{id:"mca-step5"},"Step 5: Add App Registration Credentials to Vantage"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to the ",(0,r.kt)("a",{parentName:"li",href:"https://console.vantage.sh/settings/integrations"},"Integrations page")," in the Vantage console, and add an Azure integration."),(0,r.kt)("li",{parentName:"ol"},"On the Azure integration page, click ",(0,r.kt)("strong",{parentName:"li"},"Add Credentials"),"."),(0,r.kt)("li",{parentName:"ol"},"Add the following credentials:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Azure AD Tenant ID"),", add the ",(0,r.kt)("strong",{parentName:"li"},"Directory (tenant) ID")," you obtained in ",(0,r.kt)("a",{parentName:"li",href:"/connecting_azure_mca#mca-step1"},"step 1"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Service Principal App ID"),", add the ",(0,r.kt)("strong",{parentName:"li"},"Application (client) ID")," you obtained in ",(0,r.kt)("a",{parentName:"li",href:"/connecting_azure_mca#mca-step1"},"step 1"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Service Principal Password"),", add the client secret you obtained in ",(0,r.kt)("a",{parentName:"li",href:"/connecting_azure_mca#mca-step2"},"step 2"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Billing Account Id"),", add the ",(0,r.kt)("strong",{parentName:"li"},"Billing Account Id")," you obtained in ",(0,r.kt)("a",{parentName:"li",href:"/connecting_azure_ea#mca-step3"},"step 3"),"."))),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Connect Account"),".")),(0,r.kt)("p",null,"Vantage will begin importing your Azure costs."),(0,r.kt)("h2",{id:"next-steps-workspace-access"},"Next Steps: Workspace Access"),(0,r.kt)("p",null,"See the ",(0,r.kt)("a",{parentName:"p",href:"/connecting_azure#workspace-access"},"Workspace Access")," section on the main ",(0,r.kt)("em",{parentName:"p"},"Connecting Azure")," page for information on how to assign this integration to one or more workspaces."))}m.isMDXComponent=!0}}]);