"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[7266],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=d(n),p=i,g=c["".concat(l,".").concat(p)]||c[p]||u[p]||o;return n?a.createElement(g,r(r({ref:t},m),{},{components:n})):a.createElement(g,r({ref:t},m))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9236:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var a=n(7462),i=(n(7294),n(3905));const o={id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",keywords:["Cost recommendations","EC2 rightsizing recommendations"],toc_max_heading_level:4},r="Cost Recommendations",s={unversionedId:"cost_recommendations",id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",source:"@site/docs/cost_recommendations.md",sourceDirName:".",slug:"/cost_recommendations",permalink:"/cost_recommendations",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/cost_recommendations.md",tags:[],version:"current",frontMatter:{id:"cost_recommendations",title:"Cost Recommendations",description:"View cost recommendations in Vantage and find ways to save on your cloud bill.",keywords:["Cost recommendations","EC2 rightsizing recommendations"],toc_max_heading_level:4},sidebar:"someSidebar",previous:{title:"Savings Planner",permalink:"/savings_planner"},next:{title:"Changelog",permalink:"/changelog"}},l={},d=[{value:"Types of Recommendations",id:"types-of-recommendations",level:2},{value:"View Cost Recommendations",id:"view-cost-recommendations",level:2},{value:"View Recommendations during a Trial",id:"view-recommendations-during-a-trial",level:3},{value:"Provider-Specific Recommendations",id:"provider-specific-recommendations",level:2},{value:"AWS Recommendations",id:"aws",level:3},{value:"EC2 Rightsizing Recommendations",id:"ec2-rightsizing-recommendations",level:4},{value:"Azure Recommendations",id:"azure",level:3},{value:"Datadog Recommendations",id:"datadog",level:3},{value:"Kubernetes Rightsizing Recommendations",id:"kubernetes-rightsizing",level:3},{value:"View Kubernetes Rightsizing Recommendations",id:"view-kubernetes-rightsizing-recommendations",level:4},{value:"How Vantage Calculates Kubernetes Rightsizing Recommendations",id:"how-vantage-calculates-kubernetes-rightsizing-recommendations",level:4}],m={toc:d},c="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"cost-recommendations"},"Cost Recommendations"),(0,i.kt)("p",null,"Vantage monitors your connected providers and shows cost recommendations as your infrastructure evolves and changes. You can implement these recommendations to lower your bill."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Cost recommendations are currently available for AWS, Azure, and Datadog.")),(0,i.kt)("h2",{id:"types-of-recommendations"},"Types of Recommendations"),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"To get started with cost recommendations, you can also view a video demo on ",(0,i.kt)("a",{parentName:"p",href:"/vantage_university_observability"},"Vantage University")," \ud83c\udf93.")),(0,i.kt)("p",null,"Your available recommendations depend on what services and resources are running in your account. In general, there are three types of recommendations:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Cloud-provider recommendations:")," Gathered from your connected provider and further enriched in Vantage"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Custom-built recommendations:")," Created by Vantage"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Cross-provider recommendations:")," Suggests where a service from another provider could be used")),(0,i.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,i.kt)("img",{alt:"A list of cost recommendations in the console",width:"100%",src:"/img/cost-recommendations-screen.png"})),(0,i.kt)("h2",{id:"view-cost-recommendations"},"View Cost Recommendations"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"From the top navigation, click ",(0,i.kt)("strong",{parentName:"li"},"Recommendations"),"."),(0,i.kt)("li",{parentName:"ol"},"The following columns are displayed: ",(0,i.kt)("strong",{parentName:"li"},"Service"),", ",(0,i.kt)("strong",{parentName:"li"},"Potential Savings"),", and ",(0,i.kt)("strong",{parentName:"li"},"Description"),".",(0,i.kt)("admonition",{parentName:"li",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"To filter recommendations by provider, open the ",(0,i.kt)("strong",{parentName:"p"},"Show All")," menu at the top right of the table and select a provider."))),(0,i.kt)("li",{parentName:"ol"},"In cases where actions are recommended for specific resources, such as adding lifecycle policies, the ",(0,i.kt)("strong",{parentName:"li"},"View resources")," button is displayed. Click this button to see a list of the affected resources."),(0,i.kt)("li",{parentName:"ol"},"If you no longer want to view a recommendation, click the ",(0,i.kt)("strong",{parentName:"li"},"Archive")," icon (looks like an arrow pointing down). The recommendation will be moved to the ",(0,i.kt)("strong",{parentName:"li"},"Archived")," tab.")),(0,i.kt)("h3",{id:"view-recommendations-during-a-trial"},"View Recommendations during a Trial"),(0,i.kt)("p",null,"If you are currently on a trial, the specific recommendations are blurred; however, the total amount of potential savings is displayed. After you activate a Vantage subscription, these recommendations are fully visible. As you make changes to your infrastructure, the recommendations are automatically updated. Recommendations are refreshed once a day."),(0,i.kt)("h2",{id:"provider-specific-recommendations"},"Provider-Specific Recommendations"),(0,i.kt)("p",null,"The recommendations that are available for ",(0,i.kt)("a",{parentName:"p",href:"/cost_recommendations#aws"},"AWS"),", ",(0,i.kt)("a",{parentName:"p",href:"/cost_recommendations#azure"},"Azure"),", ",(0,i.kt)("a",{parentName:"p",href:"/cost_recommendations#datadog"},"Datadog"),", and ",(0,i.kt)("a",{parentName:"p",href:"/cost_recommendations#kubernetes-rightsizing"},"Kubernetes")," in Vantage are based on the granularity of data exposed by each provider. Notes for these providers are provided below."),(0,i.kt)("h3",{id:"aws"},"AWS Recommendations"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Recommendation Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Savings Plans"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will look at your AWS infrastructure on a weekly basis and provide Savings Plan recommendations tailored to your actual usage of EC2, Fargate, and Lambda.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Reserved Instances"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will recommend Reserved Instances for services, like RDS, ElastiCache, Elasticsearch, and more with specific Reserved Instances to purchase.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Stranded resources"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will look for stranded resources, such as EBS volumes, IP addresses, and more, to ensure you've cleaned up everything you're not using.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Storage optimizations"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will look at EBS volumes you're using to provide optimization recommendations as well as S3 object type usage to recommend actions, like changing EBS volumes or enabling S3 Intelligent-Tiering.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Networking optimizations"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will look for networking optimizations especially for CloudFront and S3.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Lifecycle policies"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will profile for services that can auto-delete data to reduce costs and expected savings noted.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"EC2 rightsizing opportunities"),(0,i.kt)("td",{parentName:"tr",align:null},"Vantage will identify rightsizing opportunities and provide specific reasons to rightsize EC2 instances, such as over-provisioned CPU. See more information below.")))),(0,i.kt)("h4",{id:"ec2-rightsizing-recommendations"},"EC2 Rightsizing Recommendations"),(0,i.kt)("p",null,"If you have EC2 instances that are over-allocated in terms of vCPU and GB of RAM, you may be paying more than needed per instance. Rightsizing recommendations can help you save significantly, by identifying rightsizing opportunities and providing specific reasons to rightsize, such as over-provisioned CPU."),(0,i.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,i.kt)("img",{alt:"An EC2 rightsizing recommendation with a button to compare instance sizes in the console",width:"90%",src:"https://assets.vantage.sh/blog/vantage-launches-ec2-rightsizing-recommendations/rightsizing-recommendation.png"})),(0,i.kt)("p",null,"Each recommendation includes potential savings as well as the number of instances identified for rightsizing. "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("strong",{parentName:"li"},"View resources")," to view each identified EC2 instance that is recommended for rightsizing. "),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("strong",{parentName:"li"},"Rightsizing")," tab on the ",(0,i.kt)("a",{parentName:"li",href:"/active_resources"},"Active Resources")," screen is displayed. The tab includes a recommended size for migration (e.g., \u201cMigrate to m5.large\u201d), a list of associated reasons (e.g., \u201cCPU over-provisioned\u201d), if available, and the potential monthly savings. "),(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("strong",{parentName:"li"},"Compare Pricing")," to explore an instance pricing comparison via ",(0,i.kt)("a",{parentName:"li",href:"https://instances.vantage.sh"},"ec2instances.info"),". This pricing comparison evaluates the current instance type used against the proposed instance type from the recommendation.")),(0,i.kt)("h3",{id:"azure"},"Azure Recommendations"),(0,i.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,i.kt)("img",{alt:"A list of Azure-related recommendations in the console",width:"70%",src:"/img/azure-cost-recs.png"})),(0,i.kt)("br",null),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Recommendation Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Compute reserved instances"),(0,i.kt)("td",{parentName:"tr",align:null},"Suggestions for instances with on-demand usage that could be converted to reserved instances for better savings")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Compute unattached virtual hard disks"),(0,i.kt)("td",{parentName:"tr",align:null},"Disks that have not been attached to a VM in the last 30 days")))),(0,i.kt)("h3",{id:"datadog"},"Datadog Recommendations"),(0,i.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,i.kt)("img",{alt:"A list of Datadog-related recommendations in the console",width:"100%",src:"/img/datadog-cost-recs.png"})),(0,i.kt)("p",null,"For Datadog, Vantage provides recommendations about making commitments for Datadog services where ",(0,i.kt)("a",{parentName:"p",href:"https://handbook.vantage.sh/datadog/committed-use-discounts/"},"committed use discounts")," are offered. These recommendations are based on your actual usage of Datadog services to assist with making the right commitment."),(0,i.kt)("h3",{id:"kubernetes-rightsizing"},"Kubernetes Rightsizing Recommendations"),(0,i.kt)("p",null,"Without proper resource allocation, Kubernetes clusters can become overprovisioned, leading to wasted resources and idle costs. Vantage provides Kubernetes rightsizing recommendations to help you identify affected resources. "),(0,i.kt)("p",null,"These recommendations are focused on ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/workloads/controllers/"},"managed workloads")," within Kubernetes clusters and do not provide rightsizing recommendations for the Kubernetes nodes themselves."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"For a full guide on understanding rightsizing and how to rightsize Kubernetes resources, see the following article in the ",(0,i.kt)("a",{parentName:"p",href:"https://handbook.vantage.sh/kubernetes/kubernetes-rightsizing/"},"Cloud Cost Handbook"),".")),(0,i.kt)("h4",{id:"view-kubernetes-rightsizing-recommendations"},"View Kubernetes Rightsizing Recommendations"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Rightsizing recommendations require version 1.0.24 or later of the Vantage Kubernetes agent. See the ",(0,i.kt)("a",{parentName:"p",href:"/kubernetes_agent#upgrade-agent"},"Kubernetes agent documentation")," for information on how to upgrade the agent. Once the upgrade is complete, the agent will begin uploading the data needed to generate rightsizing recommendations. After the agent is upgraded or installed, recommendations will become available within 48 hours. This step is required to ensure there is enough data to make a valid recommendation. Historical data is not available before the agent upgrade, so it is recommended that you recognize cyclical resource usage patterns, such as a weekly spike when you first review recommendations. ")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"From the ",(0,i.kt)("strong",{parentName:"li"},"Cost Recommendations")," screen, click\xa0",(0,i.kt)("strong",{parentName:"li"},"View resources"),"\xa0to view each identified Kubernetes workload that is recommended for rightsizing."),(0,i.kt)("li",{parentName:"ol"},"Select a workload from the list. The workload is displayed within the ",(0,i.kt)("a",{parentName:"li",href:"/active_resources"},"Active Resources"),"\xa0screen."),(0,i.kt)("li",{parentName:"ol"},"Select the ",(0,i.kt)("strong",{parentName:"li"},"Rightsizing"),"\xa0tab. A section for each container that\u2019s identified for rightsizing is included. ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Each recommendation includes a high-fidelity graph of CPU and RAM used within the container in the past month, the average and maximum usage for mCPU and memory, and recommendations for how to rightsize your configuration. The chart includes a per-day average usage. The table provides a 30-day average and 30-day average max usage.",(0,i.kt)("admonition",{parentName:"li",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"mCPU refers to milliCPU, which is a fractional representation of CPU, where 1 CPU is equal to 1000 milliCPU. ",(0,i.kt)("strong",{parentName:"p"},"Current Configuration")," comes from the currently configured requests for the pod template within the controller spec. This is collected by the Kubernetes agent hourly and updated when the cost data is imported, roughly once per 24 hours."))),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("strong",{parentName:"li"},"Potential Monthly Savings")," are also provided to indicate your estimated savings once these recommendations are implemented on your Kubernetes resources.")))),(0,i.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,i.kt)("img",{alt:"The Kubernetes Rightsizing UI with a sample recommendation displayed",width:"80%",src:"/img/k8s-rightsize.png"})),(0,i.kt)("h4",{id:"how-vantage-calculates-kubernetes-rightsizing-recommendations"},"How Vantage Calculates Kubernetes Rightsizing Recommendations"),(0,i.kt)("p",null,"Vantage takes the following steps to calculate Kubernetes rightsizing recommendations."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("em",{parentName:"li"},"Identify controllers with low efficiency."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Controllers running below an efficiency level of 80% over the last 30 days are identified."),(0,i.kt)("li",{parentName:"ul"},"Efficiency is calculated as the percentage of the average CPU or memory utilization divided by the amount allocated for that resource."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("em",{parentName:"li"},"Determine the target amount for rightsizing."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The target amount is calculated by dividing the average usage by the efficiency target of 80%. For example, if your average usage is 100, and the efficiency target is 80%, then Vantage determines the right size to be (100/.8), or 125."),(0,i.kt)("li",{parentName:"ul"},"This target amount might exceed the maximum observed usage, which is acceptable to provide room for potential spikes in resource usage. This also prevents containers from being terminated due to resource exhaustion."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("em",{parentName:"li"},"Calculate the potential savings."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Savings is the difference between current configuration and target configuration multiplied by a standard hourly base rate."),(0,i.kt)("li",{parentName:"ul"},"For Deployments and StatefulSets, these savings are further multiplied by the number of replicas configured for each controller."),(0,i.kt)("li",{parentName:"ul"},"The calculated amount of savings must be at least $5 to be considered for rightsizing recommendations.")))),(0,i.kt)("p",null,"If you make a configuration change to a pod, the Vantage Kubernetes agent will upload the new configuration for the pod within the hour that it is available. Vantage reruns recommendations once the next Kubernetes ingestion is processed, which is every 24 hours."))}u.isMDXComponent=!0}}]);