"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[1209],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>d});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},u="mdxType",c={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},g=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,o=t.originalType,s=t.parentName,m=l(t,["components","mdxType","originalType","parentName"]),u=p(a),g=r,d=u["".concat(s,".").concat(g)]||u[g]||c[g]||o;return a?n.createElement(d,i(i({ref:e},m),{},{components:a})):n.createElement(d,i({ref:e},m))}));function d(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=a.length,i=new Array(o);i[0]=g;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[u]="string"==typeof t?t:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},4909:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={id:"hourly_fcr",title:"Hourly Financial Commitment Reports",description:"How to enable Hourly Financial Commitment Reports.",unlisted:!0,keywords:["Financial commitment reports","Savings Plans","Reserved Instances","Hourly"]},i="Enable Hourly Financial Commitment Reports",l={unversionedId:"hourly_fcr",id:"hourly_fcr",title:"Hourly Financial Commitment Reports",description:"How to enable Hourly Financial Commitment Reports.",source:"@site/docs/hourly_fcr.md",sourceDirName:".",slug:"/hourly_fcr",permalink:"/hourly_fcr",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/hourly_fcr.md",tags:[],version:"current",frontMatter:{id:"hourly_fcr",title:"Hourly Financial Commitment Reports",description:"How to enable Hourly Financial Commitment Reports.",unlisted:!0,keywords:["Financial commitment reports","Savings Plans","Reserved Instances","Hourly"]}},s={},p=[{value:"Enable via CloudFormation",id:"cloudformation",level:2},{value:"Enable via Terraform",id:"terraform",level:2},{value:"Enable via Manual Deployment",id:"manual",level:2}],m={toc:p},u="wrapper";function c(t){let{components:e,...a}=t;return(0,r.kt)(u,(0,n.Z)({},m,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"enable-hourly-financial-commitment-reports"},"Enable Hourly Financial Commitment Reports"),(0,r.kt)("p",null,"With hourly granularity, you can analyze your financial commitment coverage and utilization, by the hour, for any 14-day period within your data retention."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"To enable this feature, contact ",(0,r.kt)("a",{parentName:"p",href:"mailto:support@vantage.sh"},"support@vantage.sh"),".")),(0,r.kt)("p",null,"If your Cost and Usage Report (CUR) is currently set to daily aggregation (the Vantage default), you must ",(0,r.kt)("a",{parentName:"p",href:"/connecting_aws#create-a-connection"},"reconnect your AWS integration")," with a new CUR configured to use an hourly time unit. This guide walks through how to obtain an hourly AWS Cost and Usage Report using ",(0,r.kt)("a",{parentName:"p",href:"/hourly_fcr#cloudformation"},"CloudFormation"),", ",(0,r.kt)("a",{parentName:"p",href:"/hourly_fcr#terraform"},"Terraform"),", or through a ",(0,r.kt)("a",{parentName:"p",href:"/hourly_fcr#manual"},"manual process"),"."),(0,r.kt)("p",null,"Vantage will experience a delay in receiving your cost data until the first hourly CUR is received from AWS. This process can take up to 24 hours. In addition, the first hourly CUR that's sent to Vantage contains only the current month's data. Follow the instructions for ",(0,r.kt)("a",{parentName:"p",href:"/connecting_aws#backfilling-aws-cur-for-previous-reporting-periods"},"backfilling a CUR")," to obtain additional months' data."),(0,r.kt)("h2",{id:"cloudformation"},"Enable via CloudFormation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"From your AWS management account (or account the CUR is deployed in), navigate to ",(0,r.kt)("strong",{parentName:"li"},"CloudFormation"),". "),(0,r.kt)("li",{parentName:"ol"},"Open the ",(0,r.kt)("strong",{parentName:"li"},"ConnectToVantage-")," stack.",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-1.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"At the top, click ",(0,r.kt)("strong",{parentName:"li"},"Update Stack")," > ",(0,r.kt)("strong",{parentName:"li"},"Create a change set"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-2.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Use existing template"),", then click ",(0,r.kt)("strong",{parentName:"li"},"Next"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-3.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Make the following changes:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Update the ",(0,r.kt)("strong",{parentName:"li"},"ReportName")," so this it is unique. It is recommended you append ",(0,r.kt)("em",{parentName:"li"},"-hourly")," to the existing ",(0,r.kt)("strong",{parentName:"li"},"ReportName"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-4a.png"})," ")),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"TimeUnit"),", change the value from ",(0,r.kt)("strong",{parentName:"li"},"DAILY")," to ",(0,r.kt)("strong",{parentName:"li"},"HOURLY"),". Then, click ",(0,r.kt)("strong",{parentName:"li"},"Next"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-4b.png"})," ")))),(0,r.kt)("li",{parentName:"ol"},"Check the box at the bottom to acknowledge the changes that are being made. Then, click ",(0,r.kt)("strong",{parentName:"li"},"Next"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-5.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Review your changes and click ",(0,r.kt)("strong",{parentName:"li"},"Submit"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-6.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Your change set will be created based on the changes to your resources. This process may take a few minutes. At the top right, click ",(0,r.kt)("strong",{parentName:"li"},"Execute change set"),". (If you are unable to click the ",(0,r.kt)("strong",{parentName:"li"},"Execute change set")," button, click the circular ",(0,r.kt)("strong",{parentName:"li"},"Refresh")," icon below the button.)",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-7.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"CloudFormation processes your changes, which includes deleting the previous CUR definition and creating a new hourly CUR.",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-cloudformation-step-8.png"})," "))),(0,r.kt)("h2",{id:"terraform"},"Enable via Terraform"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"You must be on ",(0,r.kt)("a",{parentName:"p",href:"https://registry.terraform.io/modules/vantage-sh/vantage-integration/aws/0.1.6"},"version 0.1.6")," or above of the Vantage Terraform provider.")),(0,r.kt)("p",null,"If you are using the Vantage Terraform provider ",(0,r.kt)("a",{parentName:"p",href:"https://registry.terraform.io/modules/vantage-sh/vantage-integration/aws/latest"},"AWS integration module"),", an optional parameter for ",(0,r.kt)("inlineCode",{parentName:"p"},"cur_report_time_unit")," is provided. Update the parameter's value to ",(0,r.kt)("inlineCode",{parentName:"p"},"HOURLY")," and apply your changes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-hcl"},'provider "aws" {\n  region = "us-east-1"\n  assume_role {\n    role_arn = "arn:aws:iam::123456789012:role/admin-role"\n  }\n}\n\nmodule "vantage-integration" {\n  source  = "vantage-sh/vantage-integration/aws"\n\n  # Bucket names must be globally unique. It is provisioned with private acl\'s\n  # and only accessed by Vantage via the provisioned cross account role.\n  cur_bucket_name        = "my-company-cur-vantage"\n  # Optional: granularity of the CUR report: "HOURLY" or "DAILY"\n  cur_report_time_unit   = "HOURLY"\n}\n')),(0,r.kt)("h2",{id:"manual"},"Enable via Manual Deployment"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Log in to AWS, and navigate to the ",(0,r.kt)("strong",{parentName:"li"},"Billing and Cost Management")," console. "),(0,r.kt)("li",{parentName:"ol"},"From the left navigation menu, under ",(0,r.kt)("strong",{parentName:"li"},"Cost and Usage Analysis"),", select ",(0,r.kt)("strong",{parentName:"li"},"Data Exports"),".",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-manual-step-1.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Create")," to create a new CUR definition.",(0,r.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)"}},(0,r.kt)("img",{alt:"Cloudformation Console",width:"100%",src:"/img/hourly-manual-step-2.png"})," ")),(0,r.kt)("li",{parentName:"ol"},"Create a Data Export with the following parameters:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Export details")," section:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Legacy CUR export"),"."),(0,r.kt)("li",{parentName:"ul"},"Enter an ",(0,r.kt)("strong",{parentName:"li"},"Export name")," of your choice."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Export content")," section:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Additional export content"),", select ",(0,r.kt)("strong",{parentName:"li"},"Include resource IDs"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Data refresh settings"),", select ",(0,r.kt)("strong",{parentName:"li"},"Refresh automatically"),"."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Data export delivery options")," section:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Report data time granularity"),", select ",(0,r.kt)("strong",{parentName:"li"},"Hourly"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Report versioning"),", select ",(0,r.kt)("strong",{parentName:"li"},"Overwrite existing report"),"."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"Compression type"),", select ",(0,r.kt)("strong",{parentName:"li"},"gzip"),"."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Data Export storage settings")," section:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"S3 bucket"),", select the same S3 bucket your existing Vantage CUR uses."),(0,r.kt)("li",{parentName:"ul"},"For ",(0,r.kt)("strong",{parentName:"li"},"S3 path prefix"),", enter ",(0,r.kt)("em",{parentName:"li"},"hourly-v1"),"."))))),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Create Report"),".")))}c.isMDXComponent=!0}}]);