"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[5455],{9811:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>p,toc:()=>d});var n=a(7462),s=(a(7294),a(3905)),r=a(2004),o=a.n(r);const i={id:"network_flow_reports",name:"Virtual Tagging",description:"Network Flow Reports provide visibility by source and destination to the flows within your network that are driving costs.",toc_max_heading_level:4,keywords:["Network Flow Reports","VPC Flow Logs"]},l="Network Flow Reports",p={unversionedId:"network_flow_reports",id:"network_flow_reports",title:"Network Flow Reports",description:"Network Flow Reports provide visibility by source and destination to the flows within your network that are driving costs.",source:"@site/docs/network_flow_reports.md",sourceDirName:".",slug:"/network_flow_reports",permalink:"/network_flow_reports",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/network_flow_reports.md",tags:[],version:"current",frontMatter:{id:"network_flow_reports",name:"Virtual Tagging",description:"Network Flow Reports provide visibility by source and destination to the flows within your network that are driving costs.",toc_max_heading_level:4,keywords:["Network Flow Reports","VPC Flow Logs"]},sidebar:"someSidebar",previous:{title:"Resource Reports",permalink:"/active_resources"},next:{title:"Segments",permalink:"/segments"}},m={},d=[{value:"Set Up VPC Flow Log Integration",id:"setup",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Cost to Enable VPC Flow Logs in AWS",id:"cost-to-enable-vpc-flow-logs-in-aws",level:4},{value:"Enable the Integration",id:"enable-the-integration",level:3},{value:"Unsupported Logs",id:"unsupported-logs",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"KMS Encrypted Buckets",id:"kms-encrypted-buckets",level:4},{value:"Manage Existing Integrations",id:"manage-existing-integrations",level:3},{value:"Create a New Network Flow Report",id:"create-a-new-network-flow-report",level:2},{value:"Filter and Group a Network Flow Report",id:"filter-and-group-a-network-flow-report",level:2},{value:"Apply Filter Criteria",id:"apply-filter-criteria",level:3},{value:"Apply Grouping Criteria",id:"apply-grouping-criteria",level:3},{value:"Adjust Flow Weight",id:"flow-weight",level:3},{value:"View Flow Log Metadata",id:"view-flow-log-metadata",level:2},{value:"Estimated Cost Calculation for Network Flows",id:"estimated-cost",level:2},{value:"Network Costs on Cost Reports",id:"network-costs-on-cost-reports",level:2},{value:"Network Flow Report Examples",id:"nfr-examples",level:2},{value:"Example 1: View All Network Traffic",id:"example-1-view-all-network-traffic",level:3},{value:"Example 2: Identify Cross-AZ Traffic",id:"example-2-identify-cross-az-traffic",level:3},{value:"Example 3: Examine Public Traffic",id:"example-3-examine-public-traffic",level:3}],c={toc:d},k="wrapper";function h(e){let{components:t,...a}=e;return(0,s.kt)(k,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"network-flow-reports"},"Network Flow Reports"),(0,s.kt)("p",null,"For any network-enabled resource, Network Flow Reports provide visibility by source and destination to the flows within your network that are driving costs. You can filter these reports to identify resources that are accruing network costs, generate detailed views of the sources and destinations of the network traffic, and investigate metadata on specific resources in the flow. This feature makes it possible to correlate data transfer charges with both external services, such as Datadog, and internal applications."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"At this time, only AWS is supported. Additional support for providers with flow log functionality, such as Azure and Google Cloud, is planned for the future.")),(0,s.kt)("h2",{id:"setup"},"Set Up VPC Flow Log Integration"),(0,s.kt)("p",null,"Network Flow Reports require an existing ",(0,s.kt)("a",{parentName:"p",href:"/connecting_aws"},"AWS provider integration"),". The Vantage AWS account-specific IAM role needs to be granted access to the S3 buckets where you publish your VPC Flow Logs. Vantage can automatically detect any existing S3 buckets that contain VPC Flow Logs. You need to configure this integration for each AWS account that has an S3 bucket with VPC Flow Logs."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"The Vantage configuration does not work with Amazon CloudWatch because of the high cost of querying CloudWatch. Logs need to be published to S3 for the Vantage integration to work.")),(0,s.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("p",null,"Ensure you have at least the following fields in your VPC Flow Log format to increase the discoverability of network-related costs. If you do not have these fields enabled, Vantage may be unable to properly correlate your network flows to estimated costs."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"${action} ${bytes} ${dstaddr} ${start} ${end} ${flow-direction} ${log-status} ${region} ${srcaddr} ${account-id} ${instance-id} ${interface-id} ${subnet-id} ${vpc-id} ${az-id}\n")),(0,s.kt)("p",null,"See the ",(0,s.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-s3.html#flow-logs-s3-create-flow-log"},"AWS documentation")," for information on how to set up VPC Flow Logs that publish to S3. Vantage can ingest both Text and Parquet log file formats."),(0,s.kt)("h4",{id:"cost-to-enable-vpc-flow-logs-in-aws"},"Cost to Enable VPC Flow Logs in AWS"),(0,s.kt)("p",null,"When you enable VPC Flow Logs, you incur both S3 storage costs and CloudWatch data ingestion costs on your AWS bill. These charges are represented in the costs for the S3 bucket where your flow logs are written to as well as an ",(0,s.kt)("inlineCode",{parentName:"p"},"S3-Egress")," fee from CloudWatch. Unfortunately, there is no way around these costs being incurred. Vantage has contacted various AWS platform teams to attempt to remove this cost, but this is likely a limitation that AWS is unwilling to change or remove."),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"For more information about VPC Flow Logs pricing, see this ",(0,s.kt)("a",{parentName:"p",href:"https://handbook.vantage.sh/aws/services/vpc-flow-logs-pricing/"},"Cloud Cost Handbook article"),".")),(0,s.kt)("h3",{id:"enable-the-integration"},"Enable the Integration"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"From the top navigation bar, click ",(0,s.kt)("strong",{parentName:"li"},"Active Resources"),"."),(0,s.kt)("li",{parentName:"ol"},"From the side navigation bar, select ",(0,s.kt)("strong",{parentName:"li"},"Network Flow Reports"),"."),(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Configure VPC Flow Logs"),"."),(0,s.kt)("li",{parentName:"ol"},"All flow logs that have been synced as active resources in Vantage are displayed in the left panel of the onboarding workflow. Click the checkbox next to any listed flow log to select all log files. You can also click the down arrow to the right of any flow log and select or deselect specific log files listed.",(0,s.kt)("admonition",{parentName:"li",type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"If you do not see specific flow log files, check whether they are ",(0,s.kt)("a",{parentName:"p",href:"https://console.vantage.sh/resources/new?filter=%7B%22%7C%7C%22%3A%5B%7B%22%5E%22%3A%5B%7B%22%3D%22%3A%5B%22provider_id%22%2C1%5D%7D%2C%7B%22%7C%7C%22%3A%5B%7B%22%3D%22%3A%5B%22type%22%2C%22ProviderResource%3A%3AAws%3A%3AVpcFlowLog%22%5D%7D%5D%7D%5D%7D%5D%7D&resource_type=ProviderResource%3A%3AAws%3A%3AVpcFlowLog&title=VPC+Flow+Logs"},"synced as active resources")," in Vantage. Ensure that all accounts where there are flow logs have ",(0,s.kt)("a",{parentName:"p",href:"/active_resources/#aws-active-resources"},"active resources enabled")," in Vantage."))),(0,s.kt)("li",{parentName:"ol"},"When you select the checkbox, the ",(0,s.kt)("strong",{parentName:"li"},"Sync All")," toggle is automatically enabled. You can disable this option if you do not want the files to automatically sync again each night."),(0,s.kt)("li",{parentName:"ol"},"The right panel contains instructions on how to get set up using the AWS CLI, AWS Management Console, or the ",(0,s.kt)("a",{parentName:"li",href:"/terraform"},"Vantage Terraform provider"),". Select the tab for your preferred option. If you have multiple connected accounts with VPC Flow Logs, instructions or code samples are provided for each account."),(0,s.kt)("li",{parentName:"ol"},"After you run the code in the AWS CLI, deploy your Terraform configuration, or complete the steps in the AWS Management Console, click ",(0,s.kt)("strong",{parentName:"li"},"Check Permissions"),". A message is displayed that indicates whether the bucket permissions were successfully set up or if they are missing. A red ",(0,s.kt)("strong",{parentName:"li"},"X")," is displayed next to any buckets in the left panel that do not have sufficient permissions. Some log files may also be unsupported. See the ",(0,s.kt)("a",{parentName:"li",href:"/network_flow_reports#unsupported-logs"},"section below")," for details."),(0,s.kt)("li",{parentName:"ol"},"Once permissions are successfully set up, click ",(0,s.kt)("strong",{parentName:"li"},"Connect"),". A message is displayed that indicates your flow logs are being imported. Click ",(0,s.kt)("strong",{parentName:"li"},"Check Import Status")," to review the status of your integration. A ",(0,s.kt)("strong",{parentName:"li"},"Processing\u2026")," status is displayed until the import is complete.")),(0,s.kt)("p",null,"Data is usually available within 24 hours of initially enabling the integration. You will receive an email once the data import is complete. Vantage ingests your logs nightly."),(0,s.kt)("h3",{id:"unsupported-logs"},"Unsupported Logs"),(0,s.kt)("p",null,"When a particular log cannot be imported, Vantage displays either an ",(0,s.kt)("inlineCode",{parentName:"p"},"UNSUPPORTED TRAFFIC"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"UNSUPPORTED DESTINATION"),", or ",(0,s.kt)("inlineCode",{parentName:"p"},"UNSUPPORTED LOG FORMAT")," label next to the log name in the ",(0,s.kt)("strong",{parentName:"p"},"Manage VPC Flow Logs")," window. Hover your mouse over this label to see additional information about the issue."),(0,s.kt)("table",null,(0,s.kt)("tr",null,(0,s.kt)("th",null,"Issue"),(0,s.kt)("th",null,"Description")),(0,s.kt)("tr",null,(0,s.kt)("td",null,(0,s.kt)("code",null,"UNSUPPORTED TRAFFIC")),(0,s.kt)("td",null,"Vantage does not import any ",(0,s.kt)("code",null,"REJECT")," flows, nor any flows that do not generate corresponding costs.")),(0,s.kt)("tr",null,(0,s.kt)("td",null,(0,s.kt)("code",null,"UNSUPPORTED DESTINATION")),(0,s.kt)("td",null,"This message is displayed if a log is going to any destination other than S3. Logs need to be published to S3 to be imported by Vantage.")),(0,s.kt)("tr",null,(0,s.kt)("td",null,(0,s.kt)("code",null,"UNSUPPORTED LOG FORMAT")),(0,s.kt)("td",null,"Unsupported log format means that your log may be missing some required columns. Hover over the ",(0,s.kt)("code",null,"UNSUPPORTED LOG FORMAT")," label to see a list of missing columns. Ensure your logs contain the columns noted in the ",(0,s.kt)("a",{href:"/network_flow_reports#prerequisites"},"Prerequisites")," section."))),(0,s.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,s.kt)("p",null,"When you click ",(0,s.kt)("strong",{parentName:"p"},"Check Permissions")," during the onboarding process, an error is displayed when you the correct permissions are not set up. Ensure that you add the correct permissions displayed in the onboarding workflow for ",(0,s.kt)("em",{parentName:"p"},"each")," account."),(0,s.kt)("h4",{id:"kms-encrypted-buckets"},"KMS Encrypted Buckets"),(0,s.kt)("p",null,"An error is displayed for buckets that are encrypted with AWS Key Management Service (KMS). You will need to either remove encryption on these buckets or provide Vantage the necessary permissions to decrypt (i.e., ",(0,s.kt)("inlineCode",{parentName:"p"},"kms:Decrypt"),")."),(0,s.kt)("h3",{id:"manage-existing-integrations"},"Manage Existing Integrations"),(0,s.kt)("p",null,"You can view your integration status and add additional flow logs from the ",(0,s.kt)("a",{parentName:"p",href:"https://console.vantage.sh/settings/aws?vpc_flow_logs=true"},"VPC Flow Logs integration")," page. At the top of the ",(0,s.kt)("strong",{parentName:"p"},"Manage Connected VPC Flow Logs")," panel, click ",(0,s.kt)("strong",{parentName:"p"},"Manage"),". The ",(0,s.kt)("strong",{parentName:"p"},"Manage Flow Logs")," pop-up window is displayed. After the initial import, you can perform the following actions from this window:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Select additional S3 buckets and logs to sync"),(0,s.kt)("li",{parentName:"ul"},"Deselect an S3 bucket or log files to remove the bucket from syncing")),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"If you add additional fields to your VPC Flow Log format in AWS, and you already sync these logs to Vantage, this new data will be imported to Vantage on the next nightly import.")),(0,s.kt)("h2",{id:"create-a-new-network-flow-report"},"Create a New Network Flow Report"),(0,s.kt)("p",null,"Follow the steps below to create a new Network Flow Report:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"From the top navigation, click ",(0,s.kt)("strong",{parentName:"p"},"Active Resources"),".")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"From the side navigation, click ",(0,s.kt)("strong",{parentName:"p"},"Network Flow Reports"),". All your existing Network Flow Reports are displayed, along with who created the report and the date it was created."),(0,s.kt)("admonition",{parentName:"li",type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"Three reports are provided, by default, on this page: ",(0,s.kt)("em",{parentName:"p"},"All Network Flow Logs"),", ",(0,s.kt)("em",{parentName:"p"},"Cross-AZ Traffic"),", and ",(0,s.kt)("em",{parentName:"p"},"Public Traffic Destinations"),". See the ",(0,s.kt)("a",{parentName:"p",href:"/network_flow_reports#nfr-examples"},"Network Flow Report Examples section")," below for tips on how to get started with these reports."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"To create a new report, click ",(0,s.kt)("strong",{parentName:"p"},"New Network Flow Report"),".")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"A new Network Flow Report is displayed."),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"At the top of the report, a ",(0,s.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Sankey_diagram"},"Sankey diagram")," is provided. This diagram shows different network flows, based on your selected filters and grouping criteria. For example, in the image below, the nodes on the left side of the diagram show the sources of network traffic. Links, or network flows, flow from the nodes to their traffic destination (in this example, cross-AZ or public). The width of each flow corresponds with the volume of traffic or estimated cost, based on your settings, and the color corresponds with the source of the node (e.g., yellow for ",(0,s.kt)("em",{parentName:"li"},"public")," in the example below).",(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Sample Network Flow Report with cross-AZ and public traffic",width:"100%",src:"/img/nfr-start.png"}))),(0,s.kt)("li",{parentName:"ul"},"In the table below the diagram, the network flow information is displayed along with the volume of traffic (in bytes). The table is sorted in descending order by the ",(0,s.kt)("strong",{parentName:"li"},"Estimated Cost")," column. Click any column header to change the sort order. Each flow shows the estimated cost associated with that specific traffic route, helping you identify the most expensive data transfers. (See the ",(0,s.kt)("a",{parentName:"li",href:"/network_flow_reports#estimated-cost"},"section below")," for details on how the Estimated Cost column is calculated.)"),(0,s.kt)("li",{parentName:"ul"},"For each listed resource, a link to the ",(0,s.kt)("a",{parentName:"li",href:"/active_resources"},(0,s.kt)("strong",{parentName:"a"},"Active Resources")," screen")," is provided. Click this link to view additional metadata about the resource. From the ",(0,s.kt)("strong",{parentName:"li"},"Active Resources")," screen, click the ",(0,s.kt)("strong",{parentName:"li"},"Relationships")," tab to view any associated resources, such as a corresponding IGW for a VPC resource."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"You can update the criteria displayed in the Sankey diagram with the following options:"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"By default, both egress and ingress traffic are displayed. Expand the ",(0,s.kt)("strong",{parentName:"li"},"Flow Direction")," menu above the diagram to change the flow to only ",(0,s.kt)("strong",{parentName:"li"},"Egress")," or ",(0,s.kt)("strong",{parentName:"li"},"Ingress"),"."),(0,s.kt)("li",{parentName:"ul"},"From the top right of the diagram, update the date range that\u2019s displayed. Click the calendar icon and select an option, such as ",(0,s.kt)("strong",{parentName:"li"},"Last 7 Days"),", ",(0,s.kt)("strong",{parentName:"li"},"This Month"),", etc.",(0,s.kt)("admonition",{parentName:"li",type:"note"},(0,s.kt)("p",{parentName:"admonition"},"By default, Vantage ingests 7 days of network flows into your account and keeps the data available for 31 days. For Enterprise customers, this retention period can be adjusted. Contact ",(0,s.kt)("a",{parentName:"p",href:"mailto:support@vantage.sh"},"support@vantage.sh")," if you need a longer retention period."))),(0,s.kt)("li",{parentName:"ul"},"You can move the columns in the table at the bottom to visualize different flows. The diagram is also updated to depict the new order in the table.",(0,s.kt)("details",null,(0,s.kt)("summary",null,"Click to view example image"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,loop:!0,playsinline:!0,url:"/img/nfr-move-column.mp4",width:"100%",height:"100%",alt:"A column in the table is clicked and dragged to a new location",mdxType:"ReactPlayer"}))))),(0,s.kt)("li",{parentName:"ul"},"You can also filter and group/add more columns to the report. See the next section for details."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"To save the report, from the top right of the screen, click\xa0",(0,s.kt)("strong",{parentName:"p"},"Save as New"),". Enter a report name, then click\xa0",(0,s.kt)("strong",{parentName:"p"},"Save"),". (To edit this name, click the pencil icon in the breadcrumbs above the chart, next to the report's name.)"))),(0,s.kt)("h2",{id:"filter-and-group-a-network-flow-report"},"Filter and Group a Network Flow Report"),(0,s.kt)("p",null,"By default, a Network Flow Report is grouped by the following fields:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Source Resource UUID"),(0,s.kt)("li",{parentName:"ul"},"Peer Resource UUID"),(0,s.kt)("li",{parentName:"ul"},"Traffic Category")),(0,s.kt)("p",null,"You can filter and group by multiple criteria in Network Flow Reports. Expand the box below to see all available filter and grouping criteria with a description of each option."),(0,s.kt)("details",null,(0,s.kt)("summary",null,"Click to view all fields"),(0,s.kt)("table",null,(0,s.kt)("tr",null,(0,s.kt)("th",null,"Vantage Field"),(0,s.kt)("th",null,"Description"),(0,s.kt)("th",null,"Example")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Account ID"),(0,s.kt)("td",null,"AWS account ID of the source network"),(0,s.kt)("td",null,"production, 123456789012")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Availability Zone ID"),(0,s.kt)("td",null,"ID of the source Availability Zone"),(0,s.kt)("td",null,"us-east-1a")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Destination Address"),(0,s.kt)("td",null,"Specific IP address that identifies the location of where the traffic is being sent"),(0,s.kt)("td",null,"An IP, like 1.23.456.90")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Destination Hostname"),(0,s.kt)("td",null,"Domain name that corresponds with the IP address of the destination ",(0,s.kt)("i",null,"(see note below table)")),(0,s.kt)("td",null,"01234.broadband.com",(0,s.kt)("br",null),(0,s.kt)("br",null),"OR",(0,s.kt)("br",null),(0,s.kt)("br",null),"Datadog",(0,s.kt)("br",null),(0,s.kt)("br",null),"A ",(0,s.kt)("code",null,"dsthostname:null")," value means Vantage is unable to reverse DNS the ",(0,s.kt)("code",null,"dst_address")," IP address.")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Flow Direction"),(0,s.kt)("td",null,"Movement of network traffic relative to a specific network interface"),(0,s.kt)("td",null,"Ingress or egress")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Interface ID"),(0,s.kt)("td",null,"Source ENI ID"),(0,s.kt)("td",null,"eni-001d78b2agh4caa05")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Instance ID"),(0,s.kt)("td",null,"Source instance ID"),(0,s.kt)("td",null,"i-0b22a22eec53b9321")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Resource UUID"),(0,s.kt)("td",null,"Destination resource ARN or tag (if available)"),(0,s.kt)("td",null,"eni-c123ab7f9c55af9a6d",(0,s.kt)("br",null),(0,s.kt)("br",null),"OR",(0,s.kt)("br",null),(0,s.kt)("br",null),"example-tag")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Account ID"),(0,s.kt)("td",null,"Destination account ID"),(0,s.kt)("td",null,"production, 123456789012")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer VPC ID"),(0,s.kt)("td",null,"Destination VPC ID"),(0,s.kt)("td",null,"vpc-12a34567b8g8a03ef")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Region ID"),(0,s.kt)("td",null,"AWS Region of destination"),(0,s.kt)("td",null,"us-west-2")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Availability Zone ID"),(0,s.kt)("td",null,"ID of the Availability Zone for the destination"),(0,s.kt)("td",null,"us-east-1b")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Subnet ID"),(0,s.kt)("td",null,"Destination subnet ID"),(0,s.kt)("td",null,"subnet-123ab7f9c55af9a6d")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Interface ID"),(0,s.kt)("td",null,"Destination ENI ID"),(0,s.kt)("td",null,"eni-001d78b2agh4caa12")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Peer Instance ID"),(0,s.kt)("td",null,"Destination instance ID"),(0,s.kt)("td",null,"i-0b22a22eec53b9321")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Region"),(0,s.kt)("td",null,"AWS Region of the source"),(0,s.kt)("td",null,"us-east-1")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Resource UUID"),(0,s.kt)("td",null,"Source resource ARN or tag (if available)"),(0,s.kt)("td",null,"eni-c123ab7f9c55af9a6d",(0,s.kt)("br",null),(0,s.kt)("br",null),"OR",(0,s.kt)("br",null),(0,s.kt)("br",null),"example-tag")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Source Address"),(0,s.kt)("td",null,"Specific IP address from which the network traffic originates"),(0,s.kt)("td",null,"An IP, like 1.23.456.90")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Source Hostname"),(0,s.kt)("td",null,"Domain name that corresponds with the IP address of the source ",(0,s.kt)("i",null,"(see note below table)")),(0,s.kt)("td",null,"100.123.456.789.bc.googleusercontent.com",(0,s.kt)("br",null),(0,s.kt)("br",null),"OR",(0,s.kt)("br",null),(0,s.kt)("br",null),"Datadog")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Subnet ID"),(0,s.kt)("td",null,"ID of the source subnet"),(0,s.kt)("td",null,"subnet-123ab7f9c55af9a6d")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Traffic Category"),(0,s.kt)("td",null,"The type of traffic"),(0,s.kt)("td",null,"public, cross-AZ, cross-region, unknown",(0,s.kt)("br",null),(0,s.kt)("br",null),"An ",(0,s.kt)("code",null,"Unknown")," value means Vantage is unable to categorize the type of traffic based on the available metadata.")),(0,s.kt)("tr",null,(0,s.kt)("td",null,"Traffic Path"),(0,s.kt)("td",null,"Path traffic takes to reach the destination, such as through a virtual private gateway"),(0,s.kt)("td",null,(0,s.kt)("ul",null,(0,s.kt)("li",null,"In VPC"),(0,s.kt)("li",null,"Internet Gateway or Gateway VPC Endpoint"),(0,s.kt)("li",null,"Virtual Private Gateway"),(0,s.kt)("li",null,"Intra-Region VPC Peering"),(0,s.kt)("li",null,"Inter-Region VPC Peering"),(0,s.kt)("li",null,"Local Gateway"),(0,s.kt)("li",null,"Gateway VPC Endpoint (Nitro-based instances)"),(0,s.kt)("li",null,"Internet Gateway (Nitro-based instances)")))),(0,s.kt)("tr",null,(0,s.kt)("td",null,"VPC ID"),(0,s.kt)("td",null,"ID of the source VPC"),(0,s.kt)("td",null,"vpc-12a34567b8g8a03ef"))),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"To derive the hostname, Vantage checks against some hardcoded IP ranges, and then falls back to reverse DNS lookup for the IPs. If you have services with known IP ranges you want added, contact ",(0,s.kt)("a",{parentName:"p",href:"mailto:support@vantage.sh"},"support@vantage.sh"),"."))),(0,s.kt)("h3",{id:"apply-filter-criteria"},"Apply Filter Criteria"),(0,s.kt)("p",null,"You can add additional fields via grouping and filtering criteria. To add a new filter:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Click the\xa0",(0,s.kt)("strong",{parentName:"li"},"Filters"),"\xa0button on the top left of the diagram.",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("strong",{parentName:"li"},"AWS costs where..."),"\xa0tile is displayed. Click\xa0",(0,s.kt)("strong",{parentName:"li"},"+ New Rule"),"."),(0,s.kt)("li",{parentName:"ul"},"From the filter dropdown menu, select an option, like ",(0,s.kt)("strong",{parentName:"li"},"Account ID"),", ",(0,s.kt)("strong",{parentName:"li"},"Instance ID"),", etc."),(0,s.kt)("li",{parentName:"ul"},"Two additional dropdown menus are displayed. Select\xa0",(0,s.kt)("strong",{parentName:"li"},"is"),",\xa0",(0,s.kt)("strong",{parentName:"li"},"is not"),", ",(0,s.kt)("strong",{parentName:"li"},"contains"),", or ",(0,s.kt)("strong",{parentName:"li"},"does not contain"),"\xa0based on your desired filter criteria, then select one or more values from the second dropdown menu. For ",(0,s.kt)("strong",{parentName:"li"},"contains")," or ",(0,s.kt)("strong",{parentName:"li"},"does not contain,")," enter any text criteria to filter by.",(0,s.kt)("admonition",{parentName:"li",type:"note"},(0,s.kt)("p",{parentName:"admonition"},"If you are unable to see any values for a filter, this means that you are not capturing this information in your VPC Flow Logs format, and therefore, Vantage is unable to import this data."))),(0,s.kt)("li",{parentName:"ul"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Add"),".",(0,s.kt)("details",null,(0,s.kt)("summary",null,"Click to view example image"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,controls:!0,playsinline:!0,loop:!0,url:"/img/nfr-filtering.mp4",alt:"A report is filtered to public traffic",width:"100%",height:"100%",mdxType:"ReactPlayer"}))))))),(0,s.kt)("li",{parentName:"ol"},"You can optionally edit your existing rule or add additional filter criteria.",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"To edit the rule you just created, select the rule, make your changes, and click\xa0",(0,s.kt)("strong",{parentName:"li"},"Add"),"."),(0,s.kt)("li",{parentName:"ul"},"If you want to add a rule to filter multiple criteria, such as filter by certain Regions and another rule to filter by certain Destination Hostnames, click\xa0",(0,s.kt)("strong",{parentName:"li"},"+ New Rule"),". Add the additional criteria and click ",(0,s.kt)("strong",{parentName:"li"},"Add"),"."),(0,s.kt)("li",{parentName:"ul"},"To add a separate rule set, above the filter set, click\xa0",(0,s.kt)("strong",{parentName:"li"},"+ New Filter"),". This rule set will be displayed as\xa0",(0,s.kt)("strong",{parentName:"li"},"Or AWS costs where..."),"\xa0on the new tile."),(0,s.kt)("li",{parentName:"ul"},"To delete a rule set, click the trashcan icon on the top right of the rule set.",(0,s.kt)("details",null,(0,s.kt)("summary",null,"Click to view example image"),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,controls:!0,playsinline:!0,loop:!0,url:"/img/nfr-other-filters.mp4",alt:"Additional filter options and filter sets are added to the report",width:"100%",height:"100%",mdxType:"ReactPlayer"}))))))),(0,s.kt)("li",{parentName:"ol"},"Above the rule set(s), click\xa0",(0,s.kt)("strong",{parentName:"li"},"Apply"),". The diagram will update with your existing filter criteria.")),(0,s.kt)("h3",{id:"apply-grouping-criteria"},"Apply Grouping Criteria"),(0,s.kt)("p",null,"To add additional columns to the table and diagram, expand the ",(0,s.kt)("strong",{parentName:"p"},"Group By")," menu. Select or deselect grouping criteria. As you add grouping criteria, additional nodes and flows are displayed on the diagram. Additional columns are also added to the table for any new grouping criteria."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,playsinline:!0,loop:!0,url:"/img/nfr-group.mp4",alt:"A report is grouped for traffic type",width:"100%",height:"100%",mdxType:"ReactPlayer"}))),(0,s.kt)("h3",{id:"flow-weight"},"Adjust Flow Weight"),(0,s.kt)("p",null,"By default, the Sankey diagram is weighted by estimated cost. You can change this view to be weighted by bytes, or volume. Above the chart, click the ",(0,s.kt)("strong",{parentName:"p"},"Flow Weight")," menu and select ",(0,s.kt)("strong",{parentName:"p"},"Costs")," or ",(0,s.kt)("strong",{parentName:"p"},"Bytes"),". The Sankey diagram is updated accordingly. When you hover over a flow, the corresponding cost or volume in bytes is displayed in the tooltip."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,playsinline:!0,loop:!0,url:"/img/nfr-flow.mp4",alt:"The Flow Direction menu is toggled to show options for Costs and Bytes.",width:"100%",height:"100%",mdxType:"ReactPlayer"}))),(0,s.kt)("h2",{id:"view-flow-log-metadata"},"View Flow Log Metadata"),(0,s.kt)("p",null,"For certain grouping criteria, you can view additional details about specific resources. Vantage provides this information when it can fetch provider resource metadata. If Vantage can resolve the IP address for the Source Address and Destination Address grouping criteria, it will also provide metadata for these groupings."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Expand the ",(0,s.kt)("strong",{parentName:"li"},"Group By")," menu and add one or more of the following options to your grouping criteria:",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Interface ID/Peer Interface ID"),(0,s.kt)("li",{parentName:"ul"},"Subnet ID/Peer Subnet ID"),(0,s.kt)("li",{parentName:"ul"},"VPC ID/Peer VPC ID"),(0,s.kt)("li",{parentName:"ul"},"UUID/Peer UUID"))),(0,s.kt)("li",{parentName:"ol"},"In the table, select the row for any resource. The ",(0,s.kt)("strong",{parentName:"li"},"Flow Log Metadata")," panel is displayed on the right side of the screen. Data is provided for the ",(0,s.kt)("strong",{parentName:"li"},"Peer")," and ",(0,s.kt)("strong",{parentName:"li"},"Peer Resource"),". In this panel, click the link for any listed resource to see a provider resource report displayed.")),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("div",{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",width:"100%",overflow:"hidden"}},(0,s.kt)(o(),{playing:!0,muted:!0,playsinline:!0,loop:!0,url:"/img/nfr-metadata.mp4",alt:"A report is grouped by VPC ID. Then, a resource is selected and the metadata panel is displayed.",width:"100%",height:"100%",mdxType:"ReactPlayer"}))),(0,s.kt)("h2",{id:"estimated-cost"},"Estimated Cost Calculation for Network Flows"),(0,s.kt)("p",null,"The estimated cost for each flow is calculated by applying your blended data transfer rates to the flow of traffic. For example, if a flow is moving between one subnet to another and those subnets are in different Availability Zones, Vantage applies your cross-AZ data transfer rate to those bytes."),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Because data transfer rates can be tiered, and the metadata associated with the destination may change, this calculation is a best-effort calculation; however, it does help to identify cost hotspots within your network.")),(0,s.kt)("p",null,"The flow logs cost calculation is based on the following formula:"),(0,s.kt)("div",{className:"math math-display"},(0,s.kt)("span",{parentName:"div",className:"katex-display"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"E"),(0,s.kt)("mi",{parentName:"mrow"},"s"),(0,s.kt)("mi",{parentName:"mrow"},"t"),(0,s.kt)("mi",{parentName:"mrow"},"i"),(0,s.kt)("mi",{parentName:"mrow"},"m"),(0,s.kt)("mi",{parentName:"mrow"},"a"),(0,s.kt)("mi",{parentName:"mrow"},"t"),(0,s.kt)("mi",{parentName:"mrow"},"e"),(0,s.kt)("mi",{parentName:"mrow"},"d"),(0,s.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,s.kt)("mi",{parentName:"mrow"},"C"),(0,s.kt)("mi",{parentName:"mrow"},"o"),(0,s.kt)("mi",{parentName:"mrow"},"s"),(0,s.kt)("mi",{parentName:"mrow"},"t"),(0,s.kt)("mo",{parentName:"mrow"},"="),(0,s.kt)("munderover",{parentName:"mrow"},(0,s.kt)("mo",{parentName:"munderover"},"\u2211"),(0,s.kt)("mrow",{parentName:"munderover"},(0,s.kt)("mi",{parentName:"mrow"},"i"),(0,s.kt)("mo",{parentName:"mrow"},"="),(0,s.kt)("mn",{parentName:"mrow"},"1")),(0,s.kt)("mi",{parentName:"munderover"},"N")),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,s.kt)("mi",{parentName:"mrow"},"R"),(0,s.kt)("mi",{parentName:"mrow"},"a"),(0,s.kt)("mi",{parentName:"mrow"},"t"),(0,s.kt)("msub",{parentName:"mrow"},(0,s.kt)("mi",{parentName:"msub"},"e"),(0,s.kt)("mi",{parentName:"msub"},"i")),(0,s.kt)("mo",{parentName:"mrow"},"\xd7"),(0,s.kt)("mi",{parentName:"mrow"},"V"),(0,s.kt)("mi",{parentName:"mrow"},"o"),(0,s.kt)("mi",{parentName:"mrow"},"l"),(0,s.kt)("mi",{parentName:"mrow"},"u"),(0,s.kt)("mi",{parentName:"mrow"},"m"),(0,s.kt)("msub",{parentName:"mrow"},(0,s.kt)("mi",{parentName:"msub"},"e"),(0,s.kt)("mi",{parentName:"msub"},"i")),(0,s.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"Estimated\\ Cost=\\sum_{i=1}^{N} (Rate_{i} \\times Volume_{i})")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6944em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"E"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"s"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"ima"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,s.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.07153em"}},"C"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"os"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,s.kt)("span",{parentName:"span",className:"mrel"},"="),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"3.106em",verticalAlign:"-1.2777em"}}),(0,s.kt)("span",{parentName:"span",className:"mop op-limits"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.8283em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-1.8723em",marginLeft:"0em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.05em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i"),(0,s.kt)("span",{parentName:"span",className:"mrel mtight"},"="),(0,s.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,s.kt)("span",{parentName:"span",style:{top:"-3.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.05em"}}),(0,s.kt)("span",{parentName:"span"},(0,s.kt)("span",{parentName:"span",className:"mop op-symbol large-op"},"\u2211"))),(0,s.kt)("span",{parentName:"span",style:{top:"-4.3em",marginLeft:"0em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.05em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight",style:{marginRight:"0.10903em"}},"N"))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.2777em"}},(0,s.kt)("span",{parentName:"span"}))))),(0,s.kt)("span",{parentName:"span",className:"mopen"},"("),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.00773em"}},"R"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"a"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,s.kt)("span",{parentName:"span",className:"msupsub"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3117em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i"))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,s.kt)("span",{parentName:"span"})))))),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.kt)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"V"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"m"),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,s.kt)("span",{parentName:"span",className:"msupsub"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3117em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i"))))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,s.kt)("span",{parentName:"span"})))))),(0,s.kt)("span",{parentName:"span",className:"mclose"},")")))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"N")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"N")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10903em"}},"N")))))," is the total number of data flows."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("msub",{parentName:"mrow"},(0,s.kt)("mi",{parentName:"msub"},"R"),(0,s.kt)("mi",{parentName:"msub"},"i"))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"R_i")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.00773em"}},"R"),(0,s.kt)("span",{parentName:"span",className:"msupsub"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3117em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,s.kt)("span",{parentName:"span"}))))))))))," is the rate (cost per unit of data) for the ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"i")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"i")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6595em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"))))),"-th flow."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("msub",{parentName:"mrow"},(0,s.kt)("mi",{parentName:"msub"},"V"),(0,s.kt)("mi",{parentName:"msub"},"i"))),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"V_i")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"V"),(0,s.kt)("span",{parentName:"span",className:"msupsub"},(0,s.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3117em"}},(0,s.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"}},(0,s.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,s.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,s.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,s.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,s.kt)("span",{parentName:"span",className:"vlist-r"},(0,s.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,s.kt)("span",{parentName:"span"}))))))))))," is the volume of data transferred for the ",(0,s.kt)("span",{parentName:"li",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"i")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"i")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6595em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"))))),"-th flow.")),(0,s.kt)("p",null,"Vantage first identifies the different flows of data within your network. It uses information provided within the AWS Cost and Usage Reports (CUR) to determine the specific rate (cost per unit of data) that applies to each type of data flow (e.g., cross-AZ, public). Each rate for each data flow is multiplied by the amount of data transferred in that flow. The estimated cost is then determined by the sum of these products."),(0,s.kt)("h2",{id:"network-costs-on-cost-reports"},"Network Costs on Cost Reports"),(0,s.kt)("p",null,"On ",(0,s.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", for resources that generate network traffic costs (e.g., NAT Gateways), a ",(0,s.kt)("strong",{parentName:"p"},"Network Costs")," button is displayed in the Cost Report list. Click this button to view a Network Flow Report that is filtered to flows coming from that specific resource."),(0,s.kt)("p",null,"The below Cost Report is grouped by ",(0,s.kt)("strong",{parentName:"p"},"Service")," and ",(0,s.kt)("strong",{parentName:"p"},"Resource"),"."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Network Costs option on a Cost Report",width:"100%",src:"/img/nfr-cost-report.png"})),(0,s.kt)("h2",{id:"nfr-examples"},"Network Flow Report Examples"),(0,s.kt)("p",null,"The following examples demonstrate common scenarios for using Network Flow Reports. These examples are based on the three reports that Vantage provides by default: ",(0,s.kt)("em",{parentName:"p"},"All Network Flow Logs"),", ",(0,s.kt)("em",{parentName:"p"},"Cross-AZ Traffic"),", and ",(0,s.kt)("em",{parentName:"p"},"Public Traffic Destinations"),"."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Sample Network Flow Report with cross-AZ and public traffic",width:"80%",src:"/img/nfr-sample.png"})),(0,s.kt)("h3",{id:"example-1-view-all-network-traffic"},"Example 1: View All Network Traffic"),(0,s.kt)("p",null,"The ",(0,s.kt)("strong",{parentName:"p"},"All Network Flow Logs")," report shows all your network flows. The flow\u2019s Resource UUID and Peer Resource UUID are provided as well as the traffic category (e.g., public). Review this report to get a high-level view of all your traffic flows."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Sample Network Flow Report with cross-AZ and public traffic",width:"100%",src:"/img/nfr-start.png"})),(0,s.kt)("h3",{id:"example-2-identify-cross-az-traffic"},"Example 2: Identify Cross-AZ Traffic"),(0,s.kt)("p",null,"Cross-AZ data transfer within AWS incurs higher costs compared to intra-AZ data transfer. ",(0,s.kt)("a",{parentName:"p",href:"https://aws.amazon.com/ec2/pricing/on-demand/#Data_Transfer"},"According to AWS"),', \u201cFor data transferred between a Local Zone and an Availability Zone within the same AWS Region, "in" to and "out" from Amazon EC2 in the Local Zone\u201d data is charged at $0.01/GB for ',(0,s.kt)("em",{parentName:"p"},"both")," transfer in and transfer out. Transferring data between AZs requires more network bandwidth compared to transferring data within the same AZ. This additional bandwidth consumption contributes to higher costs."),(0,s.kt)("p",null,"In the provided cross-AZ report, you can view all cross-AZ traffic along with flow size and estimated cost. The ",(0,s.kt)("strong",{parentName:"p"},"Peer Availability Zone ID")," column shows exactly where the traffic is flowing. You can see both the source and peer AZs along with the associated source and peer resources."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Sample Network Flow Report with all cross-AZ traffic",width:"100%",src:"/img/nfr-az.png"})),(0,s.kt)("p",null,"Review the highest-costing flows and consider the following tips:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Try to place dependent resources within the same AZ to minimize cross-AZ data transfer."),(0,s.kt)("li",{parentName:"ul"},"Use ",(0,s.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/vpc/latest/privatelink/privatelink-access-aws-services.html"},"VPC endpoints")," to route traffic internally within AWS, reducing the need for cross-AZ traffic. This can help in minimizing data transfer costs and enhance security by keeping everything in the same VPC.")),(0,s.kt)("h3",{id:"example-3-examine-public-traffic"},"Example 3: Examine Public Traffic"),(0,s.kt)("p",null,"When monitoring network costs, analyzing public traffic can reveal significant insights about where your traffic is going when it reaches the public internet. By analyzing destination details, you can ensure that traffic is taking the correct path or is going only to trusted and necessary endpoints. In this report, the ",(0,s.kt)("strong",{parentName:"p"},"Destination Hostname")," grouping/column provides a human-readable format of the destination, helping you quickly identify known destination services or endpoints."),(0,s.kt)("div",{style:{display:"flex",justifyContent:"center"}},(0,s.kt)("img",{alt:"Sample Network Flow Report with all public traffic",width:"100%",src:"/img/nfr-public.png"})),(0,s.kt)("p",null,"Vantage identifies hostnames using a reverse DNS lookup, or when vendors publish static IP address ranges, such as Datadog, Vantage can associate these IP addresses with the name of the service. The ",(0,s.kt)("strong",{parentName:"p"},"Destination Address")," provides the exact IP address, which is useful for detailed analysis to ensure traffic is reaching the intended destinations."),(0,s.kt)("p",null,"Examine this report to understand which resources are generating public traffic and where that traffic is going. Consider whether you might use alternative services, like AWS ",(0,s.kt)("a",{parentName:"p",href:"https://aws.amazon.com/directconnect/"},"Direct Connect"),", ",(0,s.kt)("a",{parentName:"p",href:"https://aws.amazon.com/cloudfront/"},"CloudFront"),", or ",(0,s.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/whitepapers/latest/aws-vpc-connectivity-options/aws-privatelink.html"},"PrivateLink"),", to optimize data transfer and reduce costs."))}h.isMDXComponent=!0}}]);