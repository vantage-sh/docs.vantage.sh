"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[9806],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(a),d=o,m=p["".concat(s,".").concat(d)]||p[d]||k[d]||i;return a?n.createElement(m,r(r({ref:t},u),{},{components:a})):n.createElement(m,r({ref:t},u))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2902:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>k,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(7462),o=(a(7294),a(3905));const i={id:"connecting_clickhouse",title:"ClickHouse Cloud",description:"This page walks through how to integrate Vantage with your ClickHouse Cloud account.",keywords:["Grafana","Connect ClickHouse Cloud"]},r="ClickHouse Cloud",l={unversionedId:"connecting_clickhouse",id:"connecting_clickhouse",title:"ClickHouse Cloud",description:"This page walks through how to integrate Vantage with your ClickHouse Cloud account.",source:"@site/docs/connecting_clickhouse.md",sourceDirName:".",slug:"/connecting_clickhouse",permalink:"/connecting_clickhouse",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_clickhouse.md",tags:[],version:"current",frontMatter:{id:"connecting_clickhouse",title:"ClickHouse Cloud",description:"This page walks through how to integrate Vantage with your ClickHouse Cloud account.",keywords:["Grafana","Connect ClickHouse Cloud"]},sidebar:"someSidebar",previous:{title:"Grafana Cloud",permalink:"/connecting_grafana"},next:{title:"Custom Providers",permalink:"/connecting_custom_providers"}},s={},c=[{value:"Connect Your ClickHouse Cloud Account",id:"connect-your-clickhouse-cloud-account",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create the Connection",id:"create-the-connection",level:3},{value:"Next Steps: Manage Workspace Access",id:"next-steps-manage-workspace-access",level:3},{value:"Data Refresh",id:"data-refresh",level:2},{value:"Active Resources",id:"active-resources",level:2},{value:"ClickHouse Cloud Reporting Dimensions",id:"clickhouse-cloud-reporting-dimensions",level:2}],u={toc:c},p="wrapper";function k(e){let{components:t,...a}=e;return(0,o.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"clickhouse-cloud"},"ClickHouse Cloud"),(0,o.kt)("p",null,"Vantage connects to your ClickHouse Cloud account via a read-only API key with Developer permissions to ingest ClickHouse usage, costs, and discounts from ClickHouse\u2019s Organization ",(0,o.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/cloud/manage/api/usageCost-api-reference"},"usageCost API"),".  Vantage displays ClickHouse Cloud costs and associated\xa0",(0,o.kt)("a",{parentName:"p",href:"/usage_based_reporting"},"usage metrics"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The Clickhouse Organizations usageCost API only supports ClickHouse Cloud and Bring Your Own Cloud (BYOC).")),(0,o.kt)("p",null,"You can view usage data for ClickHouse Cloud consumption. Usage is measured by the following subcategories:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Compute"),(0,o.kt)("li",{parentName:"ul"},"Storage"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://clickhouse.com/docs/cloud/manage/network-data-transfer"},"Data transfer"),"\xa0(egress over the internet and cross-region)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://clickhouse.com/docs/integrations/clickpipes"},"ClickPipes"))),(0,o.kt)("p",null,"Usage is measured in ClickHouse Cloud Credits (CHCs), which is a metering unit used by ClickHouse.  "),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"You can learn more about CHCs through ",(0,o.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/en/cloud/manage/jan-2025-faq/billing"},"ClickHouse Billing documentation"),".")),(0,o.kt)("p",null,"You can integrate multiple ClickHouse Cloud integrations by providing read-only tokens for multiple organizations."),(0,o.kt)("h2",{id:"connect-your-clickhouse-cloud-account"},"Connect Your ClickHouse Cloud Account"),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Create a free Vantage account, then follow the steps below to integrate ClickHouse Cloud costs."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Vantage cannot perform writes to your ClickHouse Cloud organization. Vantage is only able to see metadata associated with your usage.")),(0,o.kt)("h3",{id:"create-the-connection"},"Create the Connection"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The below instructions for creating an API key are based on the ",(0,o.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/cloud/manage/openapi"},"ClickHouse documentation"),".")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the ClickHouse Cloud console, navigate to the ",(0,o.kt)("strong",{parentName:"p"},"Settings")," menu. Then, select ",(0,o.kt)("strong",{parentName:"p"},"API keys"),". ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"+ New API key"),"."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",null,(0,o.kt)("img",{alt:"ClickHouse API Key screen",width:"100%",src:"/img/clickhouse-api.png"})," "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add the following key details:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"For\xa0",(0,o.kt)("strong",{parentName:"li"},"API key name"),", enter\xa0",(0,o.kt)("em",{parentName:"li"},"vantage"),"."),(0,o.kt)("li",{parentName:"ul"},"For ",(0,o.kt)("strong",{parentName:"li"},"Organization Permissions"),", select ",(0,o.kt)("strong",{parentName:"li"},"Developer"),". (You can read more about roles and permissions in the ",(0,o.kt)("a",{parentName:"li",href:"https://clickhouse.com/docs/cloud/security/cloud-access-management/overview"},"ClickHouse documentation"),".)"),(0,o.kt)("li",{parentName:"ul"},"For ",(0,o.kt)("strong",{parentName:"li"},"Expires"),", select an expiration date. If the key expires, you will need to supply Vantage with a new ClickHouse Cloud API key.")),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",null,(0,o.kt)("img",{alt:"Creating a ClickHouse key",width:"100%",src:"/img/clickhouse-create-key.png"})," "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Generate API Key"),"."),(0,o.kt)("admonition",{parentName:"li",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you have any IP restrictions set, ensure you allow the following IP addresses for Vantage:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"54.87.66.45")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"3.95.43.133")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"54.162.3.72")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"44.199.143.63")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"3.218.103.23"))))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy the newly generated ",(0,o.kt)("strong",{parentName:"p"},"Key ID")," and ",(0,o.kt)("strong",{parentName:"p"},"Key Secret"),"."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",null,(0,o.kt)("img",{alt:"Copying ClickHouse key and secret",width:"100%",src:"/img/clickhouse-key-secret.png"})," "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"From the top navigation in Vantage, click\xa0",(0,o.kt)("strong",{parentName:"p"},"Settings"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left navigation, select\xa0",(0,o.kt)("strong",{parentName:"p"},"Integrations"),"\xa0and select\xa0",(0,o.kt)("strong",{parentName:"p"},"ClickHouse Cloud"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The ClickHouse Cloud integrations page is displayed. Ensure you are on the\xa0",(0,o.kt)("strong",{parentName:"p"},"Connect"),"\xa0tab.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"At the bottom of the page, click\xa0",(0,o.kt)("strong",{parentName:"p"},"Add API Key"),"\xa0and paste your newly generated API key and secret.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"For ",(0,o.kt)("strong",{parentName:"p"},"Organization ID"),", add the ClickHouse Cloud Organization ID that was assigned to your organization during creation. To find this ID:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"From the ",(0,o.kt)("strong",{parentName:"li"},"Settings")," navigation menu, under ",(0,o.kt)("strong",{parentName:"li"},"Organization"),", select your organization and click ",(0,o.kt)("strong",{parentName:"li"},"Organization details"),"."),(0,o.kt)("li",{parentName:"ul"},"Copy the value displayed next to ",(0,o.kt)("strong",{parentName:"li"},"Organization ID")," and paste this in the Vantage integration form.")),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Expand to view example image"),(0,o.kt)("div",null,(0,o.kt)("img",{alt:"Copying ClickHouse Organization ID",width:"100%",src:"/img/clickhouse-org-id.png"})," "))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Connect Account"),"."))),(0,o.kt)("p",null,"Costs will be ingested and processed as soon as you add the integration. It usually takes less than 15 minutes to ingest ClickHouse Cloud costs. As soon as they are processed, they will be available on your All Resources Cost Report. If you decide to remove your ClickHouse Cloud integration from Vantage, all costs associated with your ClickHouse Cloud API key will be removed from the Vantage console."),(0,o.kt)("h3",{id:"next-steps-manage-workspace-access"},"Next Steps: Manage Workspace Access"),(0,o.kt)("p",null,"Once your costs are imported, select which workspaces this integration is associated with. See the ",(0,o.kt)("a",{parentName:"p",href:"/workspaces#integration-workspace"},"Workspaces")," documentation for information."),(0,o.kt)("h2",{id:"data-refresh"},"Data Refresh"),(0,o.kt)("p",null,"See the ",(0,o.kt)("a",{parentName:"p",href:"/provider_data_refresh"},"provider data refresh documentation")," for information on when data for each provider refreshes in Vantage."),(0,o.kt)("h2",{id:"active-resources"},"Active Resources",(0,o.kt)("a",{parentName:"h2",href:"https://docs.vantage.sh/connecting_planetscale#active-resources"})),(0,o.kt)("p",null,"ClickHouse Cloud services are synced as active resources and available in\xa0",(0,o.kt)("a",{parentName:"p",href:"/active_resources"},"resource reports"),"."),(0,o.kt)("h2",{id:"clickhouse-cloud-reporting-dimensions"},"ClickHouse Cloud Reporting Dimensions",(0,o.kt)("a",{parentName:"h2",href:"https://docs.vantage.sh/connecting_grafana#grafana-reporting-dimensions"})),(0,o.kt)("p",null,"On ClickHouse Cloud\xa0",(0,o.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", you can filter across several dimensions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Organization (i.e., billing account)"),(0,o.kt)("li",{parentName:"ul"},"Service (e.g., ClickHouse Cloud)"),(0,o.kt)("li",{parentName:"ul"},"Category (e.g., datawarehouse or service)"),(0,o.kt)("li",{parentName:"ul"},"Subcategory (e.g., specific usage category, like ",(0,o.kt)("inlineCode",{parentName:"li"},"interRegionTier1DataTransferCHC")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"publicDataTransferCHC"),")"),(0,o.kt)("li",{parentName:"ul"},"Resource (specific ID for a given ClickHouse cluster)"),(0,o.kt)("li",{parentName:"ul"},"Tags (",(0,o.kt)("a",{parentName:"li",href:"/tagging"},"Virtual Tags"),"\xa0created in Vantage)"),(0,o.kt)("li",{parentName:"ul"},"Charge Type (e.g., usage)")),(0,o.kt)("p",null,"You can also view credits or discounts for ClickHouse Cloud costs in Cost Reports."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"At the top of any ClickHouse Cloud Cost Report, click\xa0",(0,o.kt)("strong",{parentName:"li"},"Settings"),"."),(0,o.kt)("li",{parentName:"ol"},"Then, toggle on/off\xa0",(0,o.kt)("strong",{parentName:"li"},"Credits"),"\xa0and/or\xa0",(0,o.kt)("strong",{parentName:"li"},"Discounts"),".")))}k.isMDXComponent=!0}}]);