"use strict";(self.webpackChunkdocs_vantage_sh=self.webpackChunkdocs_vantage_sh||[]).push([[5394],{3905:(e,t,a)=>{a.d(t,{Zo:()=>g,kt:()=>m});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},g=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),d=c(a),u=n,m=d["".concat(l,".").concat(u)]||d[u]||p[u]||r;return a?o.createElement(m,i(i({ref:t},g),{},{components:a})):o.createElement(m,i({ref:t},g))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:n,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9176:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=a(7462),n=(a(7294),a(3905));const r={id:"connecting_datadog",title:"Datadog",description:"This page walks through how to integrate Vantage with your Datadog account.",keywords:["Datadog","Connect Datadog"]},i="Datadog",s={unversionedId:"connecting_datadog",id:"connecting_datadog",title:"Datadog",description:"This page walks through how to integrate Vantage with your Datadog account.",source:"@site/docs/connecting_datadog.md",sourceDirName:".",slug:"/connecting_datadog",permalink:"/connecting_datadog",draft:!1,editUrl:"https://github.com/vantage-sh/docs.vantage.sh/blob/master/docs/connecting_datadog.md",tags:[],version:"current",frontMatter:{id:"connecting_datadog",title:"Datadog",description:"This page walks through how to integrate Vantage with your Datadog account.",keywords:["Datadog","Connect Datadog"]},sidebar:"someSidebar",previous:{title:"Kubernetes Costs",permalink:"/kubernetes"},next:{title:"New Relic",permalink:"/connecting_new_relic"}},l={},c=[{value:"Connect Your Datadog Account",id:"connect-your-datadog-account",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create the Connection",id:"create-the-connection",level:3},{value:"Next Steps: Manage Workspace Access",id:"next-steps-manage-workspace-access",level:3},{value:"Datadog Reporting Dimensions",id:"datadog-reporting-dimensions",level:2},{value:"Datadog Cost Tags (Usage Attribution Tags)",id:"datadog-cost-tags-usage-attribution-tags",level:3},{value:"Datadog Pricing in Vantage",id:"datadog-pricing-in-vantage",level:2},{value:"Reporting Dimensions",id:"reporting-dimensions",level:2},{value:"View Datadog Metrics on Cost Reports",id:"view-datadog-metrics-on-cost-reports",level:2},{value:"Datadog Host Costs",id:"datadog-host-costs",level:2}],g={toc:c},d="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,o.Z)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"datadog"},"Datadog"),(0,n.kt)("p",null,"Vantage uses a read-only (scoped to ",(0,n.kt)("inlineCode",{parentName:"p"},"usage_read"),") Datadog OAuth token. This token is used to pull data from the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/api/latest/usage-metering/"},"usage metering endpoint"),". The usage metering API provides hourly, daily, and monthly usage across multiple facets of Datadog. This API is available to all Pro and Enterprise customers. For ",(0,n.kt)("a",{parentName:"p",href:"/per_unit_costs#importing-from-datadog"},"Datadog business metrics"),", Vantage also requires the ",(0,n.kt)("inlineCode",{parentName:"p"},"metrics_read")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"timeseries_query")," scopes."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Usage is only accessible for ",(0,n.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/account_management/multi_organization/"},"parent-level organizations"),".")),(0,n.kt)("p",null,"For documentation about connecting to Vantage from Datadog, see the ",(0,n.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/integrations/vantage/"},"Vantage Integration page")," in Datadog's documentation."),(0,n.kt)("h2",{id:"connect-your-datadog-account"},"Connect Your Datadog Account"),(0,n.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"When connecting your Datadog account, your user will need access to the ",(0,n.kt)("inlineCode",{parentName:"li"},"usage_read")," scope to complete the connection. Vantage also requests the ",(0,n.kt)("inlineCode",{parentName:"li"},"metrics_read")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"timeseries_query")," scopes for importing ",(0,n.kt)("a",{parentName:"li",href:"/per_unit_costs#importing-from-datadog"},"Datadog business metrics"),". See the ",(0,n.kt)("a",{parentName:"li",href:"https://docs.datadoghq.com/account_management/rbac/permissions/"},"Datadog documentation")," for more information on roles."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://console.vantage.sh/signup"},"Create a free Vantage account"),", then follow the steps below to integrate Datadog costs.")),(0,n.kt)("h3",{id:"create-the-connection"},"Create the Connection"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"From the Vantage console, navigate to the ",(0,n.kt)("a",{parentName:"li",href:"https://console.vantage.sh/settings/integrations"},"Integrations page"),"."),(0,n.kt)("li",{parentName:"ol"},"Select ",(0,n.kt)("strong",{parentName:"li"},"Datadog")," and add a connection."),(0,n.kt)("li",{parentName:"ol"},"You will be brought to the Datadog login screen and guided through the Datadog OAUTH2 flow for adding your Datadog account.")),(0,n.kt)("p",null,"After authorizing the connection with Vantage, you will see the status of your connection change to ",(0,n.kt)("inlineCode",{parentName:"p"},"Importing")," within the Vantage console."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Once connected, Vantage will ingest six months of historical Datadog costs. The data is refreshed everyday at 2 AM UTC, but delays, up to 72 hours, may occur.")),(0,n.kt)("h3",{id:"next-steps-manage-workspace-access"},"Next Steps: Manage Workspace Access"),(0,n.kt)("p",null,"Once your costs are imported, select which workspaces this integration is associated with. See the ",(0,n.kt)("a",{parentName:"p",href:"/workspaces#integration-workspace"},"Workspaces")," documentation for information."),(0,n.kt)("h2",{id:"datadog-reporting-dimensions"},"Datadog Reporting Dimensions"),(0,n.kt)("p",null,"Within ",(0,n.kt)("a",{parentName:"p",href:"/cost_reports/"},"Cost Reports"),", Vantage will show cost data for at least the following services."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"APM"),(0,n.kt)("li",{parentName:"ul"},"Application Security Monitoring"),(0,n.kt)("li",{parentName:"ul"},"Audit Trail"),(0,n.kt)("li",{parentName:"ul"},"CI Visibility"),(0,n.kt)("li",{parentName:"ul"},"CSPM"),(0,n.kt)("li",{parentName:"ul"},"Database Monitoring"),(0,n.kt)("li",{parentName:"ul"},"Incident Management"),(0,n.kt)("li",{parentName:"ul"},"Infrastructure"),(0,n.kt)("li",{parentName:"ul"},"Log Management"),(0,n.kt)("li",{parentName:"ul"},"Network Monitoring"),(0,n.kt)("li",{parentName:"ul"},"Observability pipelines"),(0,n.kt)("li",{parentName:"ul"},"RUM"),(0,n.kt)("li",{parentName:"ul"},"Sensitive Data Scanner"),(0,n.kt)("li",{parentName:"ul"},"Serverless Monitoring"),(0,n.kt)("li",{parentName:"ul"},"Synthetic Monitoring"),(0,n.kt)("li",{parentName:"ul"},"Workload Security")),(0,n.kt)("p",null,"The following Cost Report filters are available for Datadog:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Organization"),(0,n.kt)("li",{parentName:"ul"},"Category"),(0,n.kt)("li",{parentName:"ul"},"Tag/Not Tagged (see the section below)"),(0,n.kt)("li",{parentName:"ul"},"Subcategory"),(0,n.kt)("li",{parentName:"ul"},"Service")),(0,n.kt)("p",null,"At the Category and Subcategory levels, you can access information such as how much Datadog spend is covered by committed-use discounts or which individual Datadog container is contributing to overall Logging costs."),(0,n.kt)("h3",{id:"datadog-cost-tags-usage-attribution-tags"},"Datadog Cost Tags (Usage Attribution Tags)"),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"This feature is only available if you have a Datadog Enterprise plan with usage tags enabled.")),(0,n.kt)("p",null,"You can have up to three tag keys per organization enabled for ",(0,n.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/account_management/billing/usage_attribution/"},"usage attribution")," in Datadog. Once enabled, Datadog begins breaking down the usage by any number of tag values for these keys. This allows you to see usage for specific services allocated to a specific key/value pair."),(0,n.kt)("p",null,"The following Datadog services support Datadog cost tags:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"APM"),(0,n.kt)("li",{parentName:"ul"},"CI Pipeline"),(0,n.kt)("li",{parentName:"ul"},"Fargate"),(0,n.kt)("li",{parentName:"ul"},"Infrastructure Hosts"),(0,n.kt)("li",{parentName:"ul"},"Lambda"),(0,n.kt)("li",{parentName:"ul"},"Logs"),(0,n.kt)("li",{parentName:"ul"},"NPM"),(0,n.kt)("li",{parentName:"ul"},"Synthetic Tests"),(0,n.kt)("li",{parentName:"ul"},"Time Series")),(0,n.kt)("p",null,"To use these tags within Vantage:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Open any ",(0,n.kt)("a",{parentName:"li",href:"/cost_reports"},"Cost Report"),"."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"Filters"),", and select ",(0,n.kt)("strong",{parentName:"li"},"Datadog")," for the provider."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"New Rule")," > ",(0,n.kt)("strong",{parentName:"li"},"Tag"),".")),(0,n.kt)("p",null,"You can also ",(0,n.kt)("strong",{parentName:"p"},"Group By")," a specific tag key on a Datadog Cost Report. The following filter operators are supported:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Tagged with key"),(0,n.kt)("li",{parentName:"ul"},"Tagged with Key where the value: is, is not, contains, does not contain"),(0,n.kt)("li",{parentName:"ul"},"Not Tagged"),(0,n.kt)("li",{parentName:"ul"},"Not Tagged with Key")),(0,n.kt)("p",null,"If you just applied your first Datadog tag key and value, it can take up to 48 hours for the tag to appear in Vantage. Tags are not applied retroactively."),(0,n.kt)("h2",{id:"datadog-pricing-in-vantage"},"Datadog Pricing in Vantage"),(0,n.kt)("p",null,"For certain services, Datadog prices based on the 95th to 99th percentile (p95/p99) of usage rather than\xa0",(0,n.kt)("em",{parentName:"p"},"daily"),"\xa0usage. For example, APM is billed on the\xa0",(0,n.kt)("a",{parentName:"p",href:"https://docs.datadoghq.com/account_management/billing/apm_tracing_profiler/#apm-hosts-with-dynamic-scaling-containers-fargate-and-no-indexed-spans"},"99th percentile"),"\xa0of the number of hosts you have running at any given time. In Vantage, Datadog costs are realized on the first day of the month. As the month progresses, you might notice that costs retroactively increase or decrease based on your usage."),(0,n.kt)("p",null,"Because these costs are always realized on the first of the month, when you compare previous periods for services that price on the p95/p99 of usage, you\u2019ll always have the same comparison dates. For services that do not price on p95/p99, Vantage shows costs realized per day, when the accompanying usage data is available."),(0,n.kt)("p",null,"In the below visual example, a Cost Report is filtered to all Datadog costs. The date grouping is set to\xa0",(0,n.kt)("strong",{parentName:"p"},"Daily"),". If you select a service row in the table, that service is isolated on the graph, and you can see how the service is priced. In this example, Log Management has accrual data and prices daily; whereas, Containers is priced based on the p95/p99 of usage, and costs are realized on the first of the month."),(0,n.kt)("div",{style:{display:"flex",justifyContent:"center",boxShadow:"0 0 10px rgba(0, 0, 0, 0.2)",borderRadius:"10px",overflow:"hidden"}},(0,n.kt)("img",{alt:"GIF selecting different Datadog services. When Log Management is selected, costs are displayed for the whole month. When Containers is selected, costs are displayed on the first of the month.",width:"100%",src:"/img/datadog-costs.gif"})),(0,n.kt)("h2",{id:"reporting-dimensions"},"Reporting Dimensions"),(0,n.kt)("p",null,"On Datadog ",(0,n.kt)("a",{parentName:"p",href:"/cost_reports"},"Cost Reports"),", you can filter across several dimensions:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Organization (organization name)"),(0,n.kt)("li",{parentName:"ul"},"Category (e.g., APM integrated spans)"),(0,n.kt)("li",{parentName:"ul"},"Tag/Not Tagged (includes Datadog tags and ",(0,n.kt)("a",{parentName:"li",href:"/virtual_tagging"},"virtual tags")," created in Vantage for this provider)"),(0,n.kt)("li",{parentName:"ul"},"Subcategory (e.g., Virtual Network Standard IPv4 Static Public IP)"),(0,n.kt)("li",{parentName:"ul"},"Charge Type (e.g., Usage)"),(0,n.kt)("li",{parentName:"ul"},"Service (e.g., Database Monitoring)")),(0,n.kt)("h2",{id:"view-datadog-metrics-on-cost-reports"},"View Datadog Metrics on Cost Reports"),(0,n.kt)("p",null,"You can import Datadog metrics as business metrics to view alongside Cost Reports. See the ",(0,n.kt)("a",{parentName:"p",href:"/per_unit_costs#importing-from-datadog"},"Per Unit Costs")," documentation for more information."),(0,n.kt)("h2",{id:"datadog-host-costs"},"Datadog Host Costs"),(0,n.kt)("p",null,"For cloud resources that have the Datadog agent installed, Vantage can associate Datadog per-host fees along with the primary cloud resources from AWS, Azure, and Google Cloud that drive those costs. See the ",(0,n.kt)("a",{parentName:"p",href:"/active_resources#datadog-host-costs"},"Active Resources")," documentation for details on how to view these costs."))}p.isMDXComponent=!0}}]);